\doxysection{TQuery.\+h}
\hypertarget{_t_query_8h_source}{}\label{_t_query_8h_source}\index{Source/EditorCore/Query/TQuery.h@{Source/EditorCore/Query/TQuery.h}}
\mbox{\hyperlink{_t_query_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_editor_core_2_query_2fwd_8h}{EditorCore/Query/fwd.h}}"{}}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <Common/assertion.h>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <Common/primitive\_type.h>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <Utility/utility.h>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <Utility/traits.h>}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <cstddef>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <utility>}}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceph_1_1editor}{ph::editor}}}
\DoxyCodeLine{00015\ \{}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Target,\ \textcolor{keyword}{typename}\ Performer\ =\ TQueryPerformer<Target>>}
\DoxyCodeLine{00028\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classph_1_1editor_1_1_t_query}{TQuery}}\ final}
\DoxyCodeLine{00029\ \{}
\DoxyCodeLine{00030\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00031\ \ \ \ \ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_a750db060ca40fcfb9886eb7bf6df0723}{PH\_DEFINE\_INLINE\_RULE\_OF\_5\_MEMBERS\_NO\_DTOR}}(\mbox{\hyperlink{classph_1_1editor_1_1_t_query}{TQuery}});}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \ \ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_a83c3bc74c91fc666176cc8fe07373948}{TQuery}}(std::shared\_ptr<Performer>\ performer,\ \mbox{\hyperlink{namespaceph_1_1editor_affec8e1f4ada8e246a346ebbf8c0b217}{EQuery}}\ mode);}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keyword}{template}<CDerived<Performer>\ DerivedPerformer>}
\DoxyCodeLine{00038\ \ \ \ \ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_a83c3bc74c91fc666176cc8fe07373948}{TQuery}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query}{TQuery<Target,\ DerivedPerformer>}}\&\ derivedQuery);}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keyword}{template}<CDerived<Performer>\ DerivedPerformer>}
\DoxyCodeLine{00043\ \ \ \ \ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_a83c3bc74c91fc666176cc8fe07373948}{TQuery}}(\mbox{\hyperlink{classph_1_1editor_1_1_t_query}{TQuery<Target,\ DerivedPerformer>}}\&\&\ derivedQuery);}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_a20365f6324a4822b8452beb0f7dfdbb3}{\string~TQuery}}();}
\DoxyCodeLine{00046\ }
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_ab81c651b64eb0f427a154cbfd0050a5e}{run}}(Target\&\ target);}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_a7e10a2b1c989f0002aac0a9d94f22519}{clear}}();}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_a1d2eaf5e2e9123471dfc3aaf83232f2e}{isEmpty}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_ab1a4b5c3051a33c740e1283e42826a20}{cancel}}();}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_a4d59937fd529afc4314f205600dfe387}{isCanceled}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ Performer\&\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_ae2452d0725c526d7731baae0437225ce}{get}}();}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keyword}{const}\ Performer\&\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_ac77aa582006e47ade984a4c69533da7b}{get}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00070\ \ \ \ \ Performer*\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_a9acec6e725429280e84ba75d4ac5cc2e}{operator\ -\/>\ }}();}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keyword}{const}\ Performer*\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_a9acec6e725429280e84ba75d4ac5cc2e}{operator\ -\/>\ }}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \textcolor{keyword}{template}<CDerived<Performer>\ DerivedPerformer\ =\ Performer,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_ae7ef96eb57ba4c46dc873f0f97972290}{once}}(Args\&\&...\ args)\ -\/>\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query}{TQuery<Target,\ DerivedPerformer>}}}
\DoxyCodeLine{00075\ \ \ \ \ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_a83c3bc74c91fc666176cc8fe07373948}{TQuery<Target,\ DerivedPerformer>}}(}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ std::make\_shared<DerivedPerformer>(std::forward<Args>(args)...),\ \mbox{\hyperlink{namespaceph_1_1editor_affec8e1f4ada8e246a346ebbf8c0b217af37ee6491951b571cc977378673904dd}{EQuery::Once}});}
\DoxyCodeLine{00078\ \ \ \ \ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keyword}{template}<CDerived<Performer>\ DerivedPerformer\ =\ Performer,\ \textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_ad73cb3718ac76f6cccffa1bcd3bb5573}{autoRetry}}(Args\&\&...\ args)\ -\/>\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query}{TQuery<Target,\ DerivedPerformer>}}}
\DoxyCodeLine{00082\ \ \ \ \ \{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_a83c3bc74c91fc666176cc8fe07373948}{TQuery<Target,\ DerivedPerformer>}}(}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ std::make\_shared<DerivedPerformer>(std::forward<Args>(args)...),\ \mbox{\hyperlink{namespaceph_1_1editor_affec8e1f4ada8e246a346ebbf8c0b217aef2a5f49e6e55bd940256debec449fb4}{EQuery::AutoRetry}});}
\DoxyCodeLine{00085\ \ \ \ \ \}}
\DoxyCodeLine{00086\ }
\DoxyCodeLine{00087\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00088\ \ \ \ \ std::shared\_ptr<Performer>\ m\_performer;}
\DoxyCodeLine{00089\ \ \ \ \ uint32\ m\_numRetries\ =\ 0;}
\DoxyCodeLine{00090\ \ \ \ \ \mbox{\hyperlink{namespaceph_1_1editor_affec8e1f4ada8e246a346ebbf8c0b217}{EQuery}}\ m\_mode\ =\ \mbox{\hyperlink{namespaceph_1_1editor_affec8e1f4ada8e246a346ebbf8c0b217af37ee6491951b571cc977378673904dd}{EQuery::Once}};}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ \textcolor{comment}{//\ For\ implicit\ copy/move\ from\ derived\ performer.}}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{comment}{//\ (would\ be\ better\ if\ more\ constraints\ can\ be\ specified\ in\ the\ friend\ declaration)}}
\DoxyCodeLine{00094\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OtherTarget,\ \textcolor{keyword}{typename}\ OtherPerformer>}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keyword}{friend}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classph_1_1editor_1_1_t_query}{TQuery}};}
\DoxyCodeLine{00096\ \};}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Target,\ \textcolor{keyword}{typename}\ Performer>}
\DoxyCodeLine{00099\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_a7e10a2b1c989f0002aac0a9d94f22519}{TQuery<Target,\ Performer>::clear}}()}
\DoxyCodeLine{00100\ \{}
\DoxyCodeLine{00101\ \ \ \ \ m\_performer\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00102\ \}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00104\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Target,\ \textcolor{keyword}{typename}\ Performer>}
\DoxyCodeLine{00105\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_a1d2eaf5e2e9123471dfc3aaf83232f2e}{TQuery<Target,\ Performer>::isEmpty}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00106\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_performer\ ==\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00108\ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Target,\ \textcolor{keyword}{typename}\ Performer>}
\DoxyCodeLine{00111\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_ae2452d0725c526d7731baae0437225ce}{TQuery<Target,\ Performer>::get}}()}
\DoxyCodeLine{00112\ -\/>\ Performer\&}
\DoxyCodeLine{00113\ \{}
\DoxyCodeLine{00114\ \ \ \ \ PH\_ASSERT(m\_performer);}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordflow}{return}\ *m\_performer;}
\DoxyCodeLine{00116\ \}}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Target,\ \textcolor{keyword}{typename}\ Performer>}
\DoxyCodeLine{00119\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_ae2452d0725c526d7731baae0437225ce}{TQuery<Target,\ Performer>::get}}()\ const}
\DoxyCodeLine{00120\ -\/>\ const\ Performer\&}
\DoxyCodeLine{00121\ \{}
\DoxyCodeLine{00122\ \ \ \ \ PH\_ASSERT(m\_performer);}
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keywordflow}{return}\ *m\_performer;}
\DoxyCodeLine{00124\ \}}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Target,\ \textcolor{keyword}{typename}\ Performer>}
\DoxyCodeLine{00127\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_a9acec6e725429280e84ba75d4ac5cc2e}{TQuery<Target,\ Performer>::operator\ -\/>\ }}()}
\DoxyCodeLine{00128\ -\/>\ Performer*}
\DoxyCodeLine{00129\ \{}
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keywordflow}{return}\ \&(get());}
\DoxyCodeLine{00131\ \}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Target,\ \textcolor{keyword}{typename}\ Performer>}
\DoxyCodeLine{00134\ \textcolor{keyword}{inline}\ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classph_1_1editor_1_1_t_query_a9acec6e725429280e84ba75d4ac5cc2e}{TQuery<Target,\ Performer>::operator\ -\/>\ }}()\ const}
\DoxyCodeLine{00135\ -\/>\ const\ Performer*}
\DoxyCodeLine{00136\ \{}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keywordflow}{return}\ \&(get());}
\DoxyCodeLine{00138\ \}}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \}\textcolor{comment}{//\ end\ namespace\ ph::editor}}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_t_query_8ipp}{EditorCore/Query/TQuery.ipp}}"{}}}

\end{DoxyCode}
