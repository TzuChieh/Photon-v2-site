\doxysection{string\+\_\+utils.\+h}
\hypertarget{string__utils_8h_source}{}\label{string__utils_8h_source}\index{Include/Common/Utility/string\_utils.h@{Include/Common/Utility/string\_utils.h}}
\mbox{\hyperlink{string__utils_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{string__utils__table_8h}{Common/Utility/string\_utils\_table.h}}"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{assertion_8h}{Common/assertion.h}}"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{exceptions_8h}{Common/exceptions.h}}"{}}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <cstddef>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <string\_view>}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ <stdexcept>}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ <charconv>}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ <limits>}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ <climits>}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ <type\_traits>}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ <format>}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ <concepts>}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ <array>}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceph_1_1string__utils}{ph::string\_utils}}}
\DoxyCodeLine{00025\ \{}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ ObjType>}
\DoxyCodeLine{00028\ \textcolor{keyword}{concept\ }\mbox{\hyperlink{conceptph_1_1string__utils_1_1_c_has_to_string}{CHasToString}}\ =\ \textcolor{keyword}{requires}\ (\textcolor{keyword}{const}\ ObjType\&\ obj)}
\DoxyCodeLine{00029\ \{}
\DoxyCodeLine{00030\ \ \ \ \ \{\ obj.toString()\ \}\ -\/>\ std::convertible\_to<std::string\_view>;}
\DoxyCodeLine{00031\ \};}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \}\textcolor{comment}{//\ end\ namespace\ ph::string\_utils}}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#define\ PH\_DEFINE\_INLINE\_TO\_STRING\_FORMATTER\_SPECIALIZATION(...)\(\backslash\)}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\ \ \ \ struct\ ::std::formatter<\_\_VA\_ARGS\_\_>\ :\ ::std::formatter<::std::string>\(\backslash\)}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\ \ \ \ \{\(\backslash\)}}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ static\_assert(::ph::string\_utils::CHasToString<\_\_VA\_ARGS\_\_>,\(\backslash\)}}
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}type\ "{}\ \#\_\_VA\_ARGS\_\_\ "{}\ must\ have\ a\ const\ method\ toString()\ and\ the\ result\ should\ be\ "{}\(\backslash\)}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ "{}implicitly\ convertible\ to\ std::string"{});\ \(\backslash\)}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ }\textcolor{comment}{/*\ \`{}parse()`\ is\ inherited\ from\ the\ base\ class\ */}\textcolor{preprocessor}{\(\backslash\)}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\ \ \ \ \(\backslash\)}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ }\textcolor{comment}{/*\ Define\ \`{}format()`\ by\ calling\ \`{}std::string`'s\ implementation\ with\ custom\ type's\ \`{}toString()`*/}\textcolor{preprocessor}{\(\backslash\)}}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ inline\ auto\ format(const\ \_\_VA\_ARGS\_\_\&\ value,\ ::std::format\_context\&\ ctx)\ const\(\backslash\)}}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \{\(\backslash\)}}
\DoxyCodeLine{00047\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ return\ ::std::formatter<::std::string>::format(\(\backslash\)}}
\DoxyCodeLine{00048\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ value.toString(),\ ctx);\(\backslash\)}}
\DoxyCodeLine{00049\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \}\(\backslash\)}}
\DoxyCodeLine{00050\ \textcolor{preprocessor}{\ \ \ \ \}}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00064\ \textcolor{preprocessor}{\#define\ PH\_DEFINE\_INLINE\_TO\_STRING\_FORMATTER(...)\(\backslash\)}}
\DoxyCodeLine{00065\ \textcolor{preprocessor}{\ \ \ \ template<>\(\backslash\)}}
\DoxyCodeLine{00066\ \textcolor{preprocessor}{\ \ \ \ PH\_DEFINE\_INLINE\_TO\_STRING\_FORMATTER\_SPECIALIZATION(\_\_VA\_ARGS\_\_)}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00082\ \textcolor{preprocessor}{\#define\ PH\_DEFINE\_INLINE\_TO\_STRING\_FORMATTER\_TEMPLATE(...)\(\backslash\)}}
\DoxyCodeLine{00083\ \textcolor{preprocessor}{\ \ \ \ PH\_DEFINE\_INLINE\_TO\_STRING\_FORMATTER\_SPECIALIZATION(\_\_VA\_ARGS\_\_)}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceph_1_1string__utils}{ph::string\_utils}}}
\DoxyCodeLine{00086\ \{}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \textcolor{keyword}{enum\ class}\ \mbox{\hyperlink{namespaceph_1_1string__utils_abecf2f015d2c6a55dc646154fd3202e2}{EWhitespace}}}
\DoxyCodeLine{00089\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \mbox{\hyperlink{namespaceph_1_1string__utils_abecf2f015d2c6a55dc646154fd3202e2ad13bc5b68b2bd9e18f29777db17cc563}{Common}},}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00094\ \ \ \ \ \mbox{\hyperlink{namespaceph_1_1string__utils_abecf2f015d2c6a55dc646154fd3202e2aeb6d8ae6f20283755b339c0dc273988b}{Standard}}}
\DoxyCodeLine{00095\ \};}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \textcolor{keyword}{template}<EWhitespace\ TYPE\ =\ EWhitespace::Common>}
\DoxyCodeLine{00098\ \textcolor{keyword}{inline}\ std::string\_view\ \mbox{\hyperlink{namespaceph_1_1string__utils_ae22dfe44e4852e78f73df16355dfa253}{get\_whitespaces}}()}
\DoxyCodeLine{00099\ \{}
\DoxyCodeLine{00100\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(TYPE\ ==\ \mbox{\hyperlink{namespaceph_1_1string__utils_abecf2f015d2c6a55dc646154fd3202e2ad13bc5b68b2bd9e18f29777db17cc563}{EWhitespace::Common}})}
\DoxyCodeLine{00101\ \ \ \ \ \{}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1string__utils_1_1table_acd8715506deba83040765aab07f7febf}{table::common\_whitespaces}};}
\DoxyCodeLine{00103\ \ \ \ \ \}}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(TYPE\ ==\ \mbox{\hyperlink{namespaceph_1_1string__utils_abecf2f015d2c6a55dc646154fd3202e2aeb6d8ae6f20283755b339c0dc273988b}{EWhitespace::Standard}})}
\DoxyCodeLine{00105\ \ \ \ \ \{}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1string__utils_1_1table_ae02d47c0acdea2eab4e7e9fec4e4874b}{table::standard\_whitespaces}};}
\DoxyCodeLine{00107\ \ \ \ \ \}}
\DoxyCodeLine{00108\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00109\ \ \ \ \ \{}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(TYPE\ ==\ \mbox{\hyperlink{namespaceph_1_1string__utils_abecf2f015d2c6a55dc646154fd3202e2ad13bc5b68b2bd9e18f29777db17cc563}{EWhitespace::Common}}\ ||\ TYPE\ ==\ \mbox{\hyperlink{namespaceph_1_1string__utils_abecf2f015d2c6a55dc646154fd3202e2aeb6d8ae6f20283755b339c0dc273988b}{EWhitespace::Standard}},}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Must\ include\ a\ case\ for\ each\ enum\ entry;\ did\ you\ forget\ to\ add\ one?"{}});}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00114\ \ \ \ \ \}}
\DoxyCodeLine{00115\ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \textcolor{keyword}{template}<EWhitespace\ TYPE\ =\ EWhitespace::Common>}
\DoxyCodeLine{00118\ \textcolor{keyword}{inline}\ \textcolor{keyword}{constexpr}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespaceph_1_1string__utils_aa8acc1dcdc0da08cb51a586b8f820859}{is\_whitespace}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ ch)}
\DoxyCodeLine{00119\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1string__utils_ae22dfe44e4852e78f73df16355dfa253}{get\_whitespaces<TYPE>}}().find(ch)\ !=\ std::string\_view::npos;}
\DoxyCodeLine{00121\ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespaceph_1_1string__utils_a808bfe8034fa165f38105dc73a747b4c}{has\_any\_of}}(\textcolor{keyword}{const}\ std::string\_view\ srcStr,\ \textcolor{keyword}{const}\ std::string\_view\ candidates)}
\DoxyCodeLine{00124\ \{}
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ foundPos\ =\ srcStr.find\_first\_of(candidates);}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordflow}{return}\ foundPos\ !=\ std::string\_view::npos;}
\DoxyCodeLine{00127\ \}}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{namespaceph_1_1string__utils_ae7ebfa1cd54dc5a5419a4f76ea246b05}{has\_none\_of}}(\textcolor{keyword}{const}\ std::string\_view\ srcStr,\ \textcolor{keyword}{const}\ std::string\_view\ candidates)}
\DoxyCodeLine{00130\ \{}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keywordflow}{return}\ !\mbox{\hyperlink{namespaceph_1_1string__utils_a808bfe8034fa165f38105dc73a747b4c}{has\_any\_of}}(srcStr,\ candidates);}
\DoxyCodeLine{00132\ \}}
\DoxyCodeLine{00133\ }
\DoxyCodeLine{00143\ \textcolor{keyword}{inline}\ std::string\_view\ \mbox{\hyperlink{namespaceph_1_1string__utils_a9c2bcc67e48025ac25d858e2ab1dad9f}{cut\_head}}(\textcolor{keyword}{const}\ std::string\_view\ srcStr,\ \textcolor{keyword}{const}\ std::string\_view\ candidates)}
\DoxyCodeLine{00144\ \{}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ nonCutPos\ =\ srcStr.find\_first\_not\_of(candidates);}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \textcolor{keyword}{auto}\ cutStr\ =\ srcStr;}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{comment}{//\ remove\_prefix():\ behavior\ is\ undefined\ for\ inputPos\ >\ size(),\ avoid\ that}}
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{comment}{//\ with\ the\ ternary\ operator}}
\DoxyCodeLine{00151\ \ \ \ \ cutStr.remove\_prefix(}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ nonCutPos\ !=\ std::string\_view::npos\ ?\ nonCutPos\ :\ srcStr.size());}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{keywordflow}{return}\ cutStr;}
\DoxyCodeLine{00155\ \}}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00166\ \textcolor{keyword}{inline}\ std::string\_view\ \mbox{\hyperlink{namespaceph_1_1string__utils_aa6a55db1a3744e229f772719f2078f45}{cut\_tail}}(\textcolor{keyword}{const}\ std::string\_view\ srcStr,\ \textcolor{keyword}{const}\ std::string\_view\ candidates)}
\DoxyCodeLine{00167\ \{}
\DoxyCodeLine{00168\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ nonCutPos\ =\ srcStr.find\_last\_not\_of(candidates);}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{keyword}{auto}\ cutStr\ =\ srcStr;}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{comment}{//\ remove\_suffix():\ behavior\ is\ undefined\ for\ inputPos\ >\ size(),\ avoid\ that}}
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{comment}{//\ with\ the\ ternary\ operator;}}
\DoxyCodeLine{00174\ \ \ \ \ \textcolor{comment}{//\ also,\ if\ <nonCutPos>\ is\ not\ npos,\ <srcStr>\ will\ not\ be\ empty}}
\DoxyCodeLine{00175\ \ \ \ \ cutStr.remove\_suffix(}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ nonCutPos\ !=\ std::string\_view::npos\ ?\ srcStr.size()\ -\/\ 1\ -\/\ nonCutPos\ :\ srcStr.size());}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keywordflow}{return}\ cutStr;}
\DoxyCodeLine{00179\ \}}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00190\ \textcolor{keyword}{inline}\ std::string\_view\ \mbox{\hyperlink{namespaceph_1_1string__utils_acf3002d33a3e83703b6339c3f7498a84}{cut\_ends}}(\textcolor{keyword}{const}\ std::string\_view\ srcStr,\ \textcolor{keyword}{const}\ std::string\_view\ candidates)}
\DoxyCodeLine{00191\ \{}
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1string__utils_a9c2bcc67e48025ac25d858e2ab1dad9f}{cut\_head}}(\mbox{\hyperlink{namespaceph_1_1string__utils_aa6a55db1a3744e229f772719f2078f45}{cut\_tail}}(srcStr,\ candidates),\ candidates);}
\DoxyCodeLine{00193\ \}}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00200\ \textcolor{keyword}{template}<EWhitespace\ TYPE\ =\ EWhitespace::Common>}
\DoxyCodeLine{00201\ \textcolor{keyword}{inline}\ std::string\_view\ \mbox{\hyperlink{namespaceph_1_1string__utils_a478905d7b7b8b2280da4f5826fcb9b8e}{trim\_head}}(\textcolor{keyword}{const}\ std::string\_view\ srcStr)}
\DoxyCodeLine{00202\ \{}
\DoxyCodeLine{00203\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1string__utils_a9c2bcc67e48025ac25d858e2ab1dad9f}{cut\_head}}(srcStr,\ \mbox{\hyperlink{namespaceph_1_1string__utils_ae22dfe44e4852e78f73df16355dfa253}{get\_whitespaces<TYPE>}}());}
\DoxyCodeLine{00204\ \}}
\DoxyCodeLine{00205\ }
\DoxyCodeLine{00211\ \textcolor{keyword}{template}<EWhitespace\ TYPE\ =\ EWhitespace::Common>}
\DoxyCodeLine{00212\ \textcolor{keyword}{inline}\ std::string\_view\ \mbox{\hyperlink{namespaceph_1_1string__utils_a5b56d343bb1503290badafa76ca49963}{trim\_tail}}(\textcolor{keyword}{const}\ std::string\_view\ srcStr)}
\DoxyCodeLine{00213\ \{}
\DoxyCodeLine{00214\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1string__utils_aa6a55db1a3744e229f772719f2078f45}{cut\_tail}}(srcStr,\ \mbox{\hyperlink{namespaceph_1_1string__utils_ae22dfe44e4852e78f73df16355dfa253}{get\_whitespaces<TYPE>}}());}
\DoxyCodeLine{00215\ \}}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00222\ \textcolor{keyword}{template}<EWhitespace\ TYPE\ =\ EWhitespace::Common>}
\DoxyCodeLine{00223\ \textcolor{keyword}{inline}\ std::string\_view\ \mbox{\hyperlink{namespaceph_1_1string__utils_a83615f1191b1894d0835561f1b00114a}{trim}}(\textcolor{keyword}{const}\ std::string\_view\ srcStr)}
\DoxyCodeLine{00224\ \{}
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1string__utils_a478905d7b7b8b2280da4f5826fcb9b8e}{trim\_head<TYPE>}}(\mbox{\hyperlink{namespaceph_1_1string__utils_a5b56d343bb1503290badafa76ca49963}{trim\_tail<TYPE>}}(srcStr));}
\DoxyCodeLine{00226\ \}}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00235\ \textcolor{keyword}{inline}\ std::string\_view\ \mbox{\hyperlink{namespaceph_1_1string__utils_ae908e885df20324155bdaf6f5654b505}{next\_token}}(}
\DoxyCodeLine{00236\ \ \ \ \ std::string\_view\ \ \ \ \ \ \ \ srcStr,\ }
\DoxyCodeLine{00237\ \ \ \ \ std::string\_view*\ \textcolor{keyword}{const}\ out\_remainingStr\ =\ \textcolor{keyword}{nullptr},}
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keyword}{const}\ std::string\_view\ \ tokenSeparators\ =\ \mbox{\hyperlink{namespaceph_1_1string__utils_ae22dfe44e4852e78f73df16355dfa253}{get\_whitespaces<>}}())}
\DoxyCodeLine{00239\ \{}
\DoxyCodeLine{00240\ \ \ \ \ srcStr\ =\ \mbox{\hyperlink{namespaceph_1_1string__utils_a9c2bcc67e48025ac25d858e2ab1dad9f}{cut\_head}}(srcStr,\ tokenSeparators);}
\DoxyCodeLine{00241\ }
\DoxyCodeLine{00242\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ separatorPos\ =\ srcStr.find\_first\_of(tokenSeparators);}
\DoxyCodeLine{00243\ \ \ \ \ \textcolor{keywordflow}{if}(separatorPos\ !=\ std::string\_view::npos)}
\DoxyCodeLine{00244\ \ \ \ \ \{}
\DoxyCodeLine{00245\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ nextToken\ =\ srcStr.substr(0,\ separatorPos);}
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(out\_remainingStr)}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \`{}separatorPos\ +\ 1`\ as\ we\ do\ not\ want\ to\ include\ the\ separator}}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ *out\_remainingStr\ =\ srcStr.substr(separatorPos\ +\ 1);}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ nextToken;}
\DoxyCodeLine{00253\ \ \ \ \ \}}
\DoxyCodeLine{00254\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00255\ \ \ \ \ \{}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ srcStr;}
\DoxyCodeLine{00257\ \ \ \ \ \}}
\DoxyCodeLine{00258\ \}}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00265\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{namespaceph_1_1string__utils_a68c9e51fd1033062e9faf966b9c53652}{az\_to\_AZ}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ ch)}
\DoxyCodeLine{00266\ \{}
\DoxyCodeLine{00267\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::numeric\_limits<unsigned\ char>::max()\ ==\ \mbox{\hyperlink{namespaceph_1_1string__utils_1_1table_a5fc45f4161025bb0551bf034e6e061bc}{table::ASCII\_TO\_UPPER}}.size()\ -\/\ 1);}
\DoxyCodeLine{00268\ }
\DoxyCodeLine{00269\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ mappedCharIdx\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\textcolor{keyword}{>}(ch);}
\DoxyCodeLine{00270\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\mbox{\hyperlink{namespaceph_1_1string__utils_1_1table_a5fc45f4161025bb0551bf034e6e061bc}{table::ASCII\_TO\_UPPER}}[mappedCharIdx]);}
\DoxyCodeLine{00271\ \}}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00278\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{char}\ \mbox{\hyperlink{namespaceph_1_1string__utils_ac6bef9dbb52e0554447768013e06a933}{AZ\_to\_az}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ ch)}
\DoxyCodeLine{00279\ \{}
\DoxyCodeLine{00280\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::numeric\_limits<unsigned\ char>::max()\ ==\ \mbox{\hyperlink{namespaceph_1_1string__utils_1_1table_aa55f81e269e2a6e70ac44c932c041738}{table::ASCII\_TO\_LOWER}}.size()\ -\/\ 1);}
\DoxyCodeLine{00281\ }
\DoxyCodeLine{00282\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ mappedCharIdx\ =\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\textcolor{keyword}{>}(ch);}
\DoxyCodeLine{00283\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{char}\textcolor{keyword}{>}(\mbox{\hyperlink{namespaceph_1_1string__utils_1_1table_aa55f81e269e2a6e70ac44c932c041738}{table::ASCII\_TO\_LOWER}}[mappedCharIdx]);}
\DoxyCodeLine{00284\ \}}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00293\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceph_1_1string__utils_a68c9e51fd1033062e9faf966b9c53652}{az\_to\_AZ}}(std::string\&\ str)}
\DoxyCodeLine{00294\ \{}
\DoxyCodeLine{00295\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{char}\&\ ch\ :\ str)}
\DoxyCodeLine{00296\ \ \ \ \ \{}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ ch\ =\ \mbox{\hyperlink{namespaceph_1_1string__utils_a68c9e51fd1033062e9faf966b9c53652}{az\_to\_AZ}}(ch);}
\DoxyCodeLine{00298\ \ \ \ \ \}}
\DoxyCodeLine{00299\ \}}
\DoxyCodeLine{00300\ }
\DoxyCodeLine{00308\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceph_1_1string__utils_ac6bef9dbb52e0554447768013e06a933}{AZ\_to\_az}}(std::string\&\ str)}
\DoxyCodeLine{00309\ \{}
\DoxyCodeLine{00310\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{char}\&\ ch\ :\ str)}
\DoxyCodeLine{00311\ \ \ \ \ \{}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ ch\ =\ \mbox{\hyperlink{namespaceph_1_1string__utils_ac6bef9dbb52e0554447768013e06a933}{AZ\_to\_az}}(ch);}
\DoxyCodeLine{00313\ \ \ \ \ \}}
\DoxyCodeLine{00314\ \}}
\DoxyCodeLine{00315\ }
\DoxyCodeLine{00318\ \textcolor{keyword}{inline}\ std::string\ \mbox{\hyperlink{namespaceph_1_1string__utils_ab03ec1c0ccc47aca32e7a01bff22bfb4}{repeat}}(\textcolor{keyword}{const}\ std::string\_view\ str,\ \textcolor{keyword}{const}\ std::size\_t\ n)}
\DoxyCodeLine{00319\ \{}
\DoxyCodeLine{00320\ \ \ \ \ \textcolor{keyword}{const}\ std::size\_t\ totalSize\ =\ str.size()\ *\ n;}
\DoxyCodeLine{00321\ }
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{comment}{//\ Valid\ for\ the\ case\ where\ <totalSize>\ is\ 0}}
\DoxyCodeLine{00323\ \ \ \ \ std::string\ result;}
\DoxyCodeLine{00324\ \ \ \ \ result.reserve(totalSize);}
\DoxyCodeLine{00325\ \ \ \ \ \textcolor{keywordflow}{for}(std::size\_t\ i\ =\ 0;\ i\ <\ n;\ ++i)}
\DoxyCodeLine{00326\ \ \ \ \ \{}
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ result\ +=\ str;}
\DoxyCodeLine{00328\ \ \ \ \ \}}
\DoxyCodeLine{00329\ }
\DoxyCodeLine{00330\ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00331\ \}}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00335\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceph_1_1string__utils_a98ecfa004222072b45147e8b6f3d55e8}{erase\_all}}(std::string\&\ str,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ ch)}
\DoxyCodeLine{00336\ \{}
\DoxyCodeLine{00337\ \ \ \ \ str.erase(std::remove(str.begin(),\ str.end(),\ ch),\ str.end());}
\DoxyCodeLine{00338\ \}}
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00340\ \textcolor{keyword}{namespace\ }detail\_from\_to\_char}
\DoxyCodeLine{00341\ \{}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{namespaceph_1_1string__utils_1_1detail__from__to__char_aa63794f185c91a346f77066fc16200b8}{throw\_from\_std\_errc\_if\_has\_error}}(\textcolor{keyword}{const}\ std::errc\ errorCode)}
\DoxyCodeLine{00344\ \{}
\DoxyCodeLine{00345\ \ \ \ \ \textcolor{comment}{//\ According\ to\ several\ sources,\ 0,\ or\ zero-\/initialized\ std::errc,}}
\DoxyCodeLine{00346\ \ \ \ \ \textcolor{comment}{//\ indicates\ no\ error.}}
\DoxyCodeLine{00347\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00348\ \ \ \ \ \textcolor{comment}{//\ [1]\ see\ the\ example\ for\ std::from\_chars}}
\DoxyCodeLine{00349\ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ https://en.cppreference.com/w/cpp/utility/from\_chars}}
\DoxyCodeLine{00350\ \ \ \ \ \textcolor{comment}{//\ [2]\ https://stackoverflow.com/a/63567008}}
\DoxyCodeLine{00351\ \ \ \ \ \textcolor{comment}{//}}
\DoxyCodeLine{00352\ \ \ \ \ \textcolor{keyword}{constexpr}\ std::errc\ NO\_ERROR\_VALUE\ =\ std::errc();}
\DoxyCodeLine{00353\ }
\DoxyCodeLine{00354\ \ \ \ \ \textcolor{keywordflow}{switch}(errorCode)}
\DoxyCodeLine{00355\ \ \ \ \ \{}
\DoxyCodeLine{00356\ \ \ \ \ \textcolor{keywordflow}{case}\ NO\_ERROR\_VALUE:}
\DoxyCodeLine{00357\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00358\ }
\DoxyCodeLine{00359\ \ \ \ \ \textcolor{keywordflow}{case}\ std::errc::invalid\_argument:}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classph_1_1_invalid_argument_exception}{InvalidArgumentException}}(}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}input\ cannot\ be\ interpreted\ as\ a\ numeric\ value"{}});}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00363\ \ \ \ \ \textcolor{keywordflow}{case}\ std::errc::result\_out\_of\_range:}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classph_1_1_overflow_exception}{OverflowException}}(}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}result\ will\ overflow\ the\ arithmetic\ type"{}});}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00367\ \ \ \ \ \textcolor{keywordflow}{case}\ std::errc::value\_too\_large:}
\DoxyCodeLine{00368\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classph_1_1_out_of_range_exception}{OutOfRangeException}}(}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}result\ cannot\ fit\ in\ the\ output\ buffer"{}});}
\DoxyCodeLine{00370\ }
\DoxyCodeLine{00371\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ \mbox{\hyperlink{classph_1_1_runtime_exception}{RuntimeException}}(}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}unknown\ error:\ std::errc\ =\ "{}}\ +\ std::to\_string(}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}std::underlying\_type\_t<std::errc>\textcolor{keyword}{>}(errorCode)));}
\DoxyCodeLine{00375\ \ \ \ \ \}}
\DoxyCodeLine{00376\ \}}
\DoxyCodeLine{00377\ }
\DoxyCodeLine{00378\ \}\textcolor{comment}{//\ end\ namespace\ detail\_from\_to\_char}}
\DoxyCodeLine{00379\ }
\DoxyCodeLine{00383\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00384\ \textcolor{keyword}{inline}\ T\ \mbox{\hyperlink{namespaceph_1_1string__utils_a95a59e119ab0ce9d85537cdf0918469e}{parse\_float}}(\textcolor{keyword}{const}\ std::string\_view\ floatStr)}
\DoxyCodeLine{00385\ \{}
\DoxyCodeLine{00386\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_floating\_point\_v<T>,}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}parse\_float()\ accepts\ only\ floating\ point\ type."{}});}
\DoxyCodeLine{00388\ }
\DoxyCodeLine{00389\ \ \ \ \ \textcolor{comment}{//\ \`{}std::from\_chars()`\ do\ not\ ignore\ leading\ whitespaces,\ we\ need\ to\ do\ it\ manually}}
\DoxyCodeLine{00390\ \ \ \ \ \textcolor{keyword}{const}\ std::string\_view\ floatStrNoLeadingWS\ =\ \mbox{\hyperlink{namespaceph_1_1string__utils_a478905d7b7b8b2280da4f5826fcb9b8e}{trim\_head}}(floatStr);}
\DoxyCodeLine{00391\ }
\DoxyCodeLine{00392\ \ \ \ \ T\ value;}
\DoxyCodeLine{00393\ \ \ \ \ \textcolor{keyword}{const}\ std::from\_chars\_result\ result\ =\ std::from\_chars(}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ floatStrNoLeadingWS.data(),}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ floatStrNoLeadingWS.data()\ +\ floatStrNoLeadingWS.size(),}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ value);}
\DoxyCodeLine{00397\ }
\DoxyCodeLine{00398\ \ \ \ \ \mbox{\hyperlink{namespaceph_1_1string__utils_1_1detail__from__to__char_aa63794f185c91a346f77066fc16200b8}{detail\_from\_to\_char::throw\_from\_std\_errc\_if\_has\_error}}(result.ec);}
\DoxyCodeLine{00399\ }
\DoxyCodeLine{00400\ \ \ \ \ \textcolor{keywordflow}{return}\ value;}
\DoxyCodeLine{00401\ \}}
\DoxyCodeLine{00402\ }
\DoxyCodeLine{00408\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00409\ \textcolor{keyword}{inline}\ T\ \mbox{\hyperlink{namespaceph_1_1string__utils_aab9ab5aece9ad8c4bfa8723e92f43990}{parse\_int}}(std::string\_view\ intStr)}
\DoxyCodeLine{00410\ \{}
\DoxyCodeLine{00411\ \ \ \ \ \textcolor{comment}{//\ TODO:\ option\ to\ handle\ base\ prefix\ (e.g.,\ 0x)}}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00413\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_integral\_v<T>,}
\DoxyCodeLine{00414\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}parse\_int()\ accepts\ only\ integer\ type."{}});}
\DoxyCodeLine{00415\ }
\DoxyCodeLine{00416\ \ \ \ \ \textcolor{comment}{//\ \`{}std::from\_chars()`\ do\ not\ ignore\ leading\ whitespaces,\ we\ need\ to\ do\ it\ manually}}
\DoxyCodeLine{00417\ \ \ \ \ intStr\ =\ \mbox{\hyperlink{namespaceph_1_1string__utils_a478905d7b7b8b2280da4f5826fcb9b8e}{trim\_head}}(intStr);}
\DoxyCodeLine{00418\ }
\DoxyCodeLine{00419\ \ \ \ \ \textcolor{keywordtype}{int}\ base\ =\ 10;}
\DoxyCodeLine{00420\ \ \ \ \ \textcolor{keywordflow}{if}(intStr.starts\_with(\textcolor{stringliteral}{"{}0x"{}}))}
\DoxyCodeLine{00421\ \ \ \ \ \{}
\DoxyCodeLine{00422\ \ \ \ \ \ \ \ \ base\ =\ 16;}
\DoxyCodeLine{00423\ }
\DoxyCodeLine{00424\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Remove\ "{}0x"{}\ as\ \`{}std::from\_chars()`\ do\ not\ recognize\ base\ prefix}}
\DoxyCodeLine{00425\ \ \ \ \ \ \ \ \ intStr.remove\_prefix(2);}
\DoxyCodeLine{00426\ \ \ \ \ \}}
\DoxyCodeLine{00427\ }
\DoxyCodeLine{00428\ \ \ \ \ \textcolor{comment}{//\ \`{}std::from\_chars()`\ does\ not\ support\ \`{}bool`\ so\ we\ treat\ it\ as\ unsigned\ char}}
\DoxyCodeLine{00429\ \ \ \ \ \textcolor{keyword}{using\ }IntType\ =\ std::conditional\_t<std::is\_same\_v<T,\ bool>,\ \textcolor{keywordtype}{unsigned}\ char,\ T>;}
\DoxyCodeLine{00430\ \ \ \ \ }
\DoxyCodeLine{00431\ \ \ \ \ std::remove\_const\_t<IntType>\ intValue;}
\DoxyCodeLine{00432\ \ \ \ \ \textcolor{keyword}{const}\ std::from\_chars\_result\ result\ =\ std::from\_chars(}
\DoxyCodeLine{00433\ \ \ \ \ \ \ \ \ intStr.data(),}
\DoxyCodeLine{00434\ \ \ \ \ \ \ \ \ intStr.data()\ +\ intStr.size(),}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ intValue,}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ base);}
\DoxyCodeLine{00437\ }
\DoxyCodeLine{00438\ \ \ \ \ \mbox{\hyperlink{namespaceph_1_1string__utils_1_1detail__from__to__char_aa63794f185c91a346f77066fc16200b8}{detail\_from\_to\_char::throw\_from\_std\_errc\_if\_has\_error}}(result.ec);}
\DoxyCodeLine{00439\ }
\DoxyCodeLine{00440\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(intValue);}
\DoxyCodeLine{00441\ \}}
\DoxyCodeLine{00442\ }
\DoxyCodeLine{00446\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ NumberType>}
\DoxyCodeLine{00447\ \textcolor{keyword}{inline}\ NumberType\ \mbox{\hyperlink{namespaceph_1_1string__utils_aeb13d5b269ac1d2886fc568beaa61e07}{parse\_number}}(\textcolor{keyword}{const}\ std::string\_view\ numberStr)}
\DoxyCodeLine{00448\ \{}
\DoxyCodeLine{00449\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(std::is\_floating\_point\_v<NumberType>)}
\DoxyCodeLine{00450\ \ \ \ \ \{}
\DoxyCodeLine{00451\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1string__utils_a95a59e119ab0ce9d85537cdf0918469e}{parse\_float<NumberType>}}(numberStr);}
\DoxyCodeLine{00452\ \ \ \ \ \}}
\DoxyCodeLine{00453\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00454\ \ \ \ \ \{}
\DoxyCodeLine{00455\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_integral\_v<NumberType>);}
\DoxyCodeLine{00456\ }
\DoxyCodeLine{00457\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1string__utils_aab9ab5aece9ad8c4bfa8723e92f43990}{parse\_int<NumberType>}}(numberStr);}
\DoxyCodeLine{00458\ \ \ \ \ \}}
\DoxyCodeLine{00459\ \}}
\DoxyCodeLine{00460\ }
\DoxyCodeLine{00474\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00475\ \textcolor{keyword}{inline}\ std::size\_t\ \mbox{\hyperlink{namespaceph_1_1string__utils_aeb3634aa5cb1ad866016d68ba8d2eac4}{stringify\_float}}(\textcolor{keyword}{const}\ T\ value,\ \textcolor{keywordtype}{char}*\ \textcolor{keyword}{const}\ out\_buffer,\ \textcolor{keyword}{const}\ std::size\_t\ bufferSize)}
\DoxyCodeLine{00476\ \{}
\DoxyCodeLine{00477\ \ \ \ \ \textcolor{comment}{//\ TODO:\ option\ to\ handle\ base\ prefix\ (e.g.,\ 0x)}}
\DoxyCodeLine{00478\ \ \ \ \ \textcolor{comment}{//\ TODO:\ option\ to\ handle\ precision}}
\DoxyCodeLine{00479\ }
\DoxyCodeLine{00480\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_floating\_point\_v<T>,}
\DoxyCodeLine{00481\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}stringify\_float()\ accepts\ only\ floating\ point\ type."{}});}
\DoxyCodeLine{00482\ }
\DoxyCodeLine{00483\ \ \ \ \ \mbox{\hyperlink{assertion_8h_a558904c79650c33ffc88d08548193229}{PH\_ASSERT}}(out\_buffer);}
\DoxyCodeLine{00484\ \ \ \ \ \mbox{\hyperlink{assertion_8h_a084da468d1c2924edeb475ac2813a894}{PH\_ASSERT\_GE}}(bufferSize,\ 1);}
\DoxyCodeLine{00485\ }
\DoxyCodeLine{00486\ \ \ \ \ \textcolor{keyword}{const}\ std::to\_chars\_result\ result\ =\ std::to\_chars(}
\DoxyCodeLine{00487\ \ \ \ \ \ \ \ \ out\_buffer,}
\DoxyCodeLine{00488\ \ \ \ \ \ \ \ \ out\_buffer\ +\ bufferSize,}
\DoxyCodeLine{00489\ \ \ \ \ \ \ \ \ value);}
\DoxyCodeLine{00490\ }
\DoxyCodeLine{00491\ \ \ \ \ \mbox{\hyperlink{namespaceph_1_1string__utils_1_1detail__from__to__char_aa63794f185c91a346f77066fc16200b8}{detail\_from\_to\_char::throw\_from\_std\_errc\_if\_has\_error}}(result.ec);}
\DoxyCodeLine{00492\ }
\DoxyCodeLine{00493\ \ \ \ \ \textcolor{comment}{//\ Must\ written\ at\ least\ a\ char,\ and\ must\ not\ exceed\ bufferSize}}
\DoxyCodeLine{00494\ \ \ \ \ \mbox{\hyperlink{assertion_8h_a558904c79650c33ffc88d08548193229}{PH\_ASSERT}}(out\_buffer\ <\ result.ptr\ \&\&\ result.ptr\ <=\ out\_buffer\ +\ bufferSize);}
\DoxyCodeLine{00495\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(result.ptr\ -\/\ out\_buffer);}
\DoxyCodeLine{00496\ \}}
\DoxyCodeLine{00497\ }
\DoxyCodeLine{00508\ \textcolor{keyword}{template}<std::\textcolor{keywordtype}{int}egral\ T>}
\DoxyCodeLine{00509\ \textcolor{keyword}{inline}\ std::size\_t\ \mbox{\hyperlink{namespaceph_1_1string__utils_ae3952ce9999dad2081ffe74739b731af}{stringify\_int\_alphabetic}}(}
\DoxyCodeLine{00510\ \ \ \ \ \textcolor{keyword}{const}\ T\ value,\ }
\DoxyCodeLine{00511\ \ \ \ \ \textcolor{keywordtype}{char}*\ \textcolor{keyword}{const}\ out\_buffer,\ }
\DoxyCodeLine{00512\ \ \ \ \ \textcolor{keyword}{const}\ std::size\_t\ bufferSize,}
\DoxyCodeLine{00513\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ base)}
\DoxyCodeLine{00514\ \{}
\DoxyCodeLine{00515\ \ \ \ \ \mbox{\hyperlink{assertion_8h_a558904c79650c33ffc88d08548193229}{PH\_ASSERT}}(out\_buffer);}
\DoxyCodeLine{00516\ \ \ \ \ \mbox{\hyperlink{assertion_8h_a084da468d1c2924edeb475ac2813a894}{PH\_ASSERT\_GE}}(bufferSize,\ 1);}
\DoxyCodeLine{00517\ \ \ \ \ \mbox{\hyperlink{assertion_8h_a193888af911b0063fee1129bf08565b9}{PH\_ASSERT\_IN\_RANGE\_INCLUSIVE}}(base,\ 2,\ 62);}
\DoxyCodeLine{00518\ }
\DoxyCodeLine{00519\ \ \ \ \ \textcolor{comment}{//\ Treat\ \`{}bool`\ as\ unsigned\ char\ (for\ arithmetics)}}
\DoxyCodeLine{00520\ \ \ \ \ \textcolor{keyword}{using\ }IntType\ =\ std::conditional\_t<std::is\_same\_v<T,\ bool>,\ \textcolor{keywordtype}{unsigned}\ char,\ T>;}
\DoxyCodeLine{00521\ \ \ \ \ \textcolor{keyword}{auto}\ intValue\ =\ \textcolor{keyword}{static\_cast<}std::remove\_const\_t<IntType>\textcolor{keyword}{>}(value);}
\DoxyCodeLine{00522\ }
\DoxyCodeLine{00523\ \ \ \ \ std::size\_t\ numCharsWritten\ =\ 0;}
\DoxyCodeLine{00524\ }
\DoxyCodeLine{00525\ \ \ \ \ \textcolor{comment}{//\ Write\ sign}}
\DoxyCodeLine{00526\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(std::is\_signed\_v<T>)}
\DoxyCodeLine{00527\ \ \ \ \ \{}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(intValue\ <\ 0)}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \ \ \ \ out\_buffer[0]\ =\ \textcolor{charliteral}{'-\/'};}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \ \ \ \ ++numCharsWritten;}
\DoxyCodeLine{00532\ }
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \ \ \ \ intValue\ =\ -\/intValue;}
\DoxyCodeLine{00534\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00535\ \ \ \ \ \}}
\DoxyCodeLine{00536\ }
\DoxyCodeLine{00537\ \ \ \ \ \textcolor{comment}{//\ Use\ a\ temporary\ buffer,\ enough\ to\ hold\ base\ 2\ output}}
\DoxyCodeLine{00538\ \ \ \ \ std::array<\textcolor{keywordtype}{unsigned}\ char,\ \textcolor{keyword}{sizeof}(IntType)\ *\ CHAR\_BIT>\ tmpBuffer;}
\DoxyCodeLine{00539\ \ \ \ \ \textcolor{keyword}{auto}\ tmpBufferEnd\ =\ tmpBuffer.end();}
\DoxyCodeLine{00540\ }
\DoxyCodeLine{00541\ \ \ \ \ \mbox{\hyperlink{assertion_8h_a084da468d1c2924edeb475ac2813a894}{PH\_ASSERT\_GE}}(intValue,\ 0);}
\DoxyCodeLine{00542\ \ \ \ \ \textcolor{keywordflow}{do}}
\DoxyCodeLine{00543\ \ \ \ \ \{}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ *(-\/-\/tmpBufferEnd)\ =\ \mbox{\hyperlink{namespaceph_1_1string__utils_1_1table_abb9ea71212b1a63542d352bcad0999a9}{table::BASE62\_DIGITS}}[intValue\ \%\ base];}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ intValue\ /=\ base;}
\DoxyCodeLine{00546\ \ \ \ \ \}\ \textcolor{keywordflow}{while}(intValue\ >\ 0);}
\DoxyCodeLine{00547\ \ \ \ \ }
\DoxyCodeLine{00548\ \ \ \ \ \textcolor{keyword}{auto}\ numDigits\ =\ tmpBuffer.end()\ -\/\ tmpBufferEnd;}
\DoxyCodeLine{00549\ \ \ \ \ \textcolor{keywordflow}{if}(numCharsWritten\ +\ numDigits\ >\ bufferSize)}
\DoxyCodeLine{00550\ \ \ \ \ \{}
\DoxyCodeLine{00551\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceph_a766ace7b3f7cc912301bfd400c74bfed}{throw\_formatted<OutOfRangeException>}}(}
\DoxyCodeLine{00552\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}result\ cannot\ fit\ in\ the\ output\ buffer:\ need=\{\},\ given=\{\}"{}},}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \ \ \ \ numCharsWritten\ +\ numDigits,\ bufferSize);}
\DoxyCodeLine{00554\ \ \ \ \ \}}
\DoxyCodeLine{00555\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00556\ \ \ \ \ \{}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \ \ std::copy(tmpBufferEnd,\ tmpBuffer.end(),\ out\_buffer\ +\ numCharsWritten);}
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ numCharsWritten\ +=\ numDigits;}
\DoxyCodeLine{00559\ \ \ \ \ \}}
\DoxyCodeLine{00560\ }
\DoxyCodeLine{00561\ \ \ \ \ \textcolor{keywordflow}{return}\ numCharsWritten;}
\DoxyCodeLine{00562\ \}}
\DoxyCodeLine{00563\ }
\DoxyCodeLine{00574\ \textcolor{keyword}{template}<std::\textcolor{keywordtype}{int}egral\ T>}
\DoxyCodeLine{00575\ \textcolor{keyword}{inline}\ std::size\_t\ \mbox{\hyperlink{namespaceph_1_1string__utils_a4b765128ba6181cd2d20343c5350259d}{stringify\_int}}(}
\DoxyCodeLine{00576\ \ \ \ \ \textcolor{keyword}{const}\ T\ value,\ }
\DoxyCodeLine{00577\ \ \ \ \ \textcolor{keywordtype}{char}*\ \textcolor{keyword}{const}\ out\_buffer,}
\DoxyCodeLine{00578\ \ \ \ \ \textcolor{keyword}{const}\ std::size\_t\ bufferSize,}
\DoxyCodeLine{00579\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ base\ =\ 10)}
\DoxyCodeLine{00580\ \{}
\DoxyCodeLine{00581\ \ \ \ \ \mbox{\hyperlink{assertion_8h_a193888af911b0063fee1129bf08565b9}{PH\_ASSERT\_IN\_RANGE\_INCLUSIVE}}(base,\ 2,\ 62);}
\DoxyCodeLine{00582\ }
\DoxyCodeLine{00583\ \ \ \ \ \textcolor{comment}{//\ Base\ in\ [2,\ 36]\ is\ supported\ by\ STL\ via\ \`{}to\_chars()`}}
\DoxyCodeLine{00584\ \ \ \ \ \textcolor{keywordflow}{if}(2\ <=\ base\ \&\&\ base\ <=\ 36)}
\DoxyCodeLine{00585\ \ \ \ \ \{}
\DoxyCodeLine{00586\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{assertion_8h_a558904c79650c33ffc88d08548193229}{PH\_ASSERT}}(out\_buffer);}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{assertion_8h_a084da468d1c2924edeb475ac2813a894}{PH\_ASSERT\_GE}}(bufferSize,\ 1);}
\DoxyCodeLine{00588\ }
\DoxyCodeLine{00589\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \`{}std::to\_chars()`\ does\ not\ support\ \`{}bool`\ so\ we\ treat\ it\ as\ unsigned\ char}}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }IntType\ =\ std::conditional\_t<std::is\_same\_v<T,\ bool>,\ \textcolor{keywordtype}{unsigned}\ char,\ T>;}
\DoxyCodeLine{00591\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ intValue\ =\ \textcolor{keyword}{static\_cast<}IntType\textcolor{keyword}{>}(value);}
\DoxyCodeLine{00592\ }
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ std::to\_chars\_result\ result\ =\ std::to\_chars(}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \ \ \ \ out\_buffer,}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \ \ \ \ out\_buffer\ +\ bufferSize,}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ \ \ \ \ intValue,}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \ \ \ \ base);}
\DoxyCodeLine{00598\ }
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceph_1_1string__utils_1_1detail__from__to__char_aa63794f185c91a346f77066fc16200b8}{detail\_from\_to\_char::throw\_from\_std\_errc\_if\_has\_error}}(result.ec);}
\DoxyCodeLine{00600\ }
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Must\ written\ at\ least\ a\ char,\ and\ must\ not\ exceed\ bufferSize}}
\DoxyCodeLine{00602\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{assertion_8h_a558904c79650c33ffc88d08548193229}{PH\_ASSERT}}(out\_buffer\ <\ result.ptr\ \&\&\ result.ptr\ <=\ out\_buffer\ +\ bufferSize);}
\DoxyCodeLine{00603\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}std::size\_t\textcolor{keyword}{>}(result.ptr\ -\/\ out\_buffer);}
\DoxyCodeLine{00604\ \ \ \ \ \}}
\DoxyCodeLine{00605\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00606\ \ \ \ \ \{}
\DoxyCodeLine{00607\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1string__utils_ae3952ce9999dad2081ffe74739b731af}{stringify\_int\_alphabetic}}(value,\ out\_buffer,\ bufferSize,\ base);}
\DoxyCodeLine{00608\ \ \ \ \ \}}
\DoxyCodeLine{00609\ \}}
\DoxyCodeLine{00610\ }
\DoxyCodeLine{00616\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ NumberType>}
\DoxyCodeLine{00617\ \textcolor{keyword}{inline}\ std::size\_t\ \mbox{\hyperlink{namespaceph_1_1string__utils_af639d1cc36d16379bf12ef68d74d2d76}{stringify\_number}}(}
\DoxyCodeLine{00618\ \ \ \ \ \textcolor{keyword}{const}\ NumberType\ value,\ }
\DoxyCodeLine{00619\ \ \ \ \ \textcolor{keywordtype}{char}*\ \textcolor{keyword}{const}\ out\_buffer,\ }
\DoxyCodeLine{00620\ \ \ \ \ \textcolor{keyword}{const}\ std::size\_t\ bufferSize)}
\DoxyCodeLine{00621\ \{}
\DoxyCodeLine{00622\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(std::is\_floating\_point\_v<NumberType>)}
\DoxyCodeLine{00623\ \ \ \ \ \{}
\DoxyCodeLine{00624\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1string__utils_aeb3634aa5cb1ad866016d68ba8d2eac4}{stringify\_float<NumberType>}}(value,\ out\_buffer,\ bufferSize);}
\DoxyCodeLine{00625\ \ \ \ \ \}}
\DoxyCodeLine{00626\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00627\ \ \ \ \ \{}
\DoxyCodeLine{00628\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_integral\_v<NumberType>);}
\DoxyCodeLine{00629\ }
\DoxyCodeLine{00630\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1string__utils_a4b765128ba6181cd2d20343c5350259d}{stringify\_int<NumberType>}}(value,\ out\_buffer,\ bufferSize);}
\DoxyCodeLine{00631\ \ \ \ \ \}}
\DoxyCodeLine{00632\ \}}
\DoxyCodeLine{00633\ }
\DoxyCodeLine{00641\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ NumberType>}
\DoxyCodeLine{00642\ \textcolor{keyword}{inline}\ std::string\&\ \mbox{\hyperlink{namespaceph_1_1string__utils_af639d1cc36d16379bf12ef68d74d2d76}{stringify\_number}}(}
\DoxyCodeLine{00643\ \ \ \ \ \textcolor{keyword}{const}\ NumberType\ value,\ }
\DoxyCodeLine{00644\ \ \ \ \ std::string\&\ out\_str,\ }
\DoxyCodeLine{00645\ \ \ \ \ \textcolor{keyword}{const}\ std::size\_t\ maxChars\ =\ 64)}
\DoxyCodeLine{00646\ \{}
\DoxyCodeLine{00647\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ originalSize\ =\ out\_str.size();}
\DoxyCodeLine{00648\ \ \ \ \ out\_str.resize(originalSize\ +\ maxChars);}
\DoxyCodeLine{00649\ }
\DoxyCodeLine{00650\ \ \ \ \ \textcolor{keyword}{const}\ std::size\_t\ newSize\ =\ \mbox{\hyperlink{namespaceph_1_1string__utils_af639d1cc36d16379bf12ef68d74d2d76}{string\_utils::stringify\_number<NumberType>}}(}
\DoxyCodeLine{00651\ \ \ \ \ \ \ \ \ value,\ out\_str.data()\ +\ originalSize,\ maxChars);}
\DoxyCodeLine{00652\ }
\DoxyCodeLine{00653\ \ \ \ \ out\_str.resize(originalSize\ +\ newSize);}
\DoxyCodeLine{00654\ \ \ \ \ \textcolor{keywordflow}{return}\ out\_str;}
\DoxyCodeLine{00655\ \}}
\DoxyCodeLine{00656\ }
\DoxyCodeLine{00663\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ NumberType>}
\DoxyCodeLine{00664\ \textcolor{keyword}{inline}\ std::string\ \mbox{\hyperlink{namespaceph_1_1string__utils_af639d1cc36d16379bf12ef68d74d2d76}{stringify\_number}}(}
\DoxyCodeLine{00665\ \ \ \ \ \textcolor{keyword}{const}\ NumberType\ value,}
\DoxyCodeLine{00666\ \ \ \ \ \textcolor{keyword}{const}\ std::size\_t\ maxChars\ =\ 64)}
\DoxyCodeLine{00667\ \{}
\DoxyCodeLine{00668\ \ \ \ \ std::string\ str;}
\DoxyCodeLine{00669\ \ \ \ \ \mbox{\hyperlink{namespaceph_1_1string__utils_af639d1cc36d16379bf12ef68d74d2d76}{stringify\_number}}(value,\ str,\ maxChars);}
\DoxyCodeLine{00670\ \ \ \ \ \textcolor{keywordflow}{return}\ str;}
\DoxyCodeLine{00671\ \}}
\DoxyCodeLine{00672\ }
\DoxyCodeLine{00673\ \}\textcolor{comment}{//\ end\ namespace\ ph::string\_utils}}

\end{DoxyCode}
