\doxysection{ph\+::lta Namespace Reference}
\hypertarget{namespaceph_1_1lta}{}\label{namespaceph_1_1lta}\index{ph::lta@{ph::lta}}


Light transport algorithms.  


\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{classph_1_1lta_1_1_p_d_f}{PDF}}
\begin{DoxyCompactList}\small\item\em A sample from a Probability Density Function (\doxylink{classph_1_1lta_1_1_p_d_f}{PDF}). \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classph_1_1lta_1_1_pt_volumetric_estimator}{Pt\+Volumetric\+Estimator}}
\item 
class \mbox{\hyperlink{classph_1_1lta_1_1_russian_roulette}{Russian\+Roulette}}
\begin{DoxyCompactList}\small\item\em Russian roulette random termination scheme. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classph_1_1lta_1_1_sense_event}{Sense\+Event}}
\item 
class \mbox{\hyperlink{classph_1_1lta_1_1_sidedness_agreement}{Sidedness\+Agreement}}
\item 
class \mbox{\hyperlink{classph_1_1lta_1_1_surface_hit_refinery}{Surface\+Hit\+Refinery}}
\begin{DoxyCompactList}\small\item\em Algorithms for various hit point adjustments. For surface escaping routines, the generated ray is not guaranteed to "{}actually"{} avoid the surface. In other words, self-\/intersection may still happen under different circumstances dpending on the method used. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classph_1_1lta_1_1_surface_tracer}{Surface\+Tracer}}
\begin{DoxyCompactList}\small\item\em Common operations for surface tracing. This class also handles many subtle cases for surface tracing. You may take the implementations here as reference if a more fine-\/grained control is needed for a custom operation. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classph_1_1lta_1_1_t_direct_light_estimator}{TDirect\+Light\+Estimator}}
\begin{DoxyCompactList}\small\item\em Estimate direct lighting for a surface point. This is a lightweight helper type for estimating direct lighting. Do not think "{}direct light"{} as lighting from a directional light source, it means the first-\/bounce lighting for any surface point, and the surface point can be the N-\/th one in a path. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classph_1_1lta_1_1_t_indirect_light_estimator}{TIndirect\+Light\+Estimator}}
\begin{DoxyCompactList}\small\item\em Estimate indirect lighting for a surface point. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{classph_1_1lta_1_1_t_m_i_s}{TMIS}}
\begin{DoxyCompactList}\small\item\em Static helper for Multiple Importance Sampling (MIS). See the paper by Veach et al. \cite{Veach:1995:Optimally} for more theoretical background. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum class \mbox{\hyperlink{namespaceph_1_1lta_a780154430f4189e2ebe4fadc88efd0bb}{EMISStyle}} \+: uint8 \{ \mbox{\hyperlink{namespaceph_1_1lta_a780154430f4189e2ebe4fadc88efd0bba99a808d8d16122d70e44bd7f709d30fb}{Balance}}
, \mbox{\hyperlink{namespaceph_1_1lta_a780154430f4189e2ebe4fadc88efd0bbadd4fe0cc913f704600b97d1f5dd285de}{Power}}
 \}
\begin{DoxyCompactList}\small\item\em Type of Multiple Importance Sampling (MIS). \end{DoxyCompactList}\item 
enum class \mbox{\hyperlink{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9dd}{EDomain}} \+: uint8 \{ \newline
\mbox{\hyperlink{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9ddace2c8aed9c2fa0cfbed56cbda4d8bf07}{Empty}} = 0
, \mbox{\hyperlink{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9dda3f8ffe43765c1baeaa1f3644b48e23b2}{Solid\+Angle}}
, \mbox{\hyperlink{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9ddadeec4ff19974f12ed781cb9a59064214}{Area}}
, \mbox{\hyperlink{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9ddaf3d7d007f2c4d9612c4128a2a6a8b011}{UV01}}
, \newline
\mbox{\hyperlink{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9ddac75c6f8c5e1c2970cf2feaf8a7331651}{UVW01}}
, \mbox{\hyperlink{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9dda4984667940802dedc139aa7a430a6553}{Discrete}}
 \}
\begin{DoxyCompactList}\small\item\em Type of the set of all possible inputs for a mathematical function. \end{DoxyCompactList}\item 
enum class \mbox{\hyperlink{namespaceph_1_1lta_a3f1c39ae8879cc69ac22c3be15f9669b}{ETransport}} \{ \mbox{\hyperlink{namespaceph_1_1lta_a3f1c39ae8879cc69ac22c3be15f9669ba955d9ba35580bdcc7bed3f11736b0f76}{Radiance}}
, \mbox{\hyperlink{namespaceph_1_1lta_a3f1c39ae8879cc69ac22c3be15f9669baf0d806461f33568d758feb27d468352a}{Importance}}
 \}
\begin{DoxyCompactList}\small\item\em Type of the transported quantity. \end{DoxyCompactList}\item 
enum class \mbox{\hyperlink{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17d}{ESidedness\+Policy}} \{ \mbox{\hyperlink{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17dae9bfe1a1271065147039d9a297a4c785}{Do\+Not\+Care}}
, \mbox{\hyperlink{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17da2e979835dd62324f5bfe217449ba4974}{Strict}}
, \mbox{\hyperlink{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17da4a2e14f37fb676f4c83b874ddeaf35e3}{Trust\+Geometry}}
, \mbox{\hyperlink{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17dab6e0902c88f013423a338605519edaf4}{Trust\+Shading}}
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
real \mbox{\hyperlink{namespaceph_1_1lta_a90b17b807b0048a147f97ee48bbaa6bd}{pdf\+A\+\_\+to\+\_\+pdfW}} (const real pdfA, const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&d\+APos\+To\+Target\+Pos, const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&d\+ANormal)
\begin{DoxyCompactList}\small\item\em Transform area domain \doxylink{classph_1_1lta_1_1_p_d_f}{PDF} to solid angle domain \doxylink{classph_1_1lta_1_1_p_d_f}{PDF} w.\+r.\+t. a position. \end{DoxyCompactList}\item 
real \mbox{\hyperlink{namespaceph_1_1lta_a1669152400e7fb4f968fae1a6211cc2c}{importance\+\_\+scatter\+\_\+\+Ns\+\_\+corrector}} (const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&Ns, const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&Ng, const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&L, const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&V)
\item 
real \mbox{\hyperlink{namespaceph_1_1lta_af768ce875381b972a702a221c9800a50}{importance\+\_\+\+BSDF\+\_\+\+Ns\+\_\+corrector}} (const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&Ns, const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&Ng, const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&V)
\item 
real \mbox{\hyperlink{namespaceph_1_1lta_ab2afad625c810a9f23c2d71d9c07031f}{tamed\+\_\+importance\+\_\+scatter\+\_\+\+Ns\+\_\+corrector}} (const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&Ns, const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&Ng, const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&L, const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&V)
\begin{DoxyCompactList}\small\item\em Smoother version of {\ttfamily \doxylink{namespaceph_1_1lta_a1669152400e7fb4f968fae1a6211cc2c}{importance\+\_\+scatter\+\_\+\+Ns\+\_\+corrector()}}. \end{DoxyCompactList}\item 
real \mbox{\hyperlink{namespaceph_1_1lta_ac017a110ee09b8cb7c2d5b0b1ff10f11}{tamed\+\_\+importance\+\_\+\+BSDF\+\_\+\+Ns\+\_\+corrector}} (const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&Ns, const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&Ng, const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&V)
\begin{DoxyCompactList}\small\item\em Smoother version of {\ttfamily \doxylink{namespaceph_1_1lta_af768ce875381b972a702a221c9800a50}{importance\+\_\+\+BSDF\+\_\+\+Ns\+\_\+corrector()}}. See {\ttfamily \doxylink{namespaceph_1_1lta_ab2afad625c810a9f23c2d71d9c07031f}{tamed\+\_\+importance\+\_\+scatter\+\_\+\+Ns\+\_\+corrector()}} for explanation. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Light transport algorithms. 

\doxysubsection{Enumeration Type Documentation}
\Hypertarget{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9dd}\index{ph::lta@{ph::lta}!EDomain@{EDomain}}
\index{EDomain@{EDomain}!ph::lta@{ph::lta}}
\doxysubsubsection{\texorpdfstring{EDomain}{EDomain}}
{\footnotesize\ttfamily \label{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9dd} 
enum class \mbox{\hyperlink{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9dd}{ph\+::lta\+::\+EDomain}} \+: uint8\hspace{0.3cm}{\ttfamily [strong]}}



Type of the set of all possible inputs for a mathematical function. 

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{Empty@{Empty}!ph::lta@{ph::lta}}\index{ph::lta@{ph::lta}!Empty@{Empty}}}\Hypertarget{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9ddace2c8aed9c2fa0cfbed56cbda4d8bf07}\label{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9dd} 
Empty&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{SolidAngle@{SolidAngle}!ph::lta@{ph::lta}}\index{ph::lta@{ph::lta}!SolidAngle@{SolidAngle}}}\Hypertarget{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9dda3f8ffe43765c1baeaa1f3644b48e23b2}\label{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9dd} 
Solid\+Angle&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Area@{Area}!ph::lta@{ph::lta}}\index{ph::lta@{ph::lta}!Area@{Area}}}\Hypertarget{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9ddadeec4ff19974f12ed781cb9a59064214}\label{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9dd} 
Area&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{UV01@{UV01}!ph::lta@{ph::lta}}\index{ph::lta@{ph::lta}!UV01@{UV01}}}\Hypertarget{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9ddaf3d7d007f2c4d9612c4128a2a6a8b011}\label{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9dd} 
UV01&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{UVW01@{UVW01}!ph::lta@{ph::lta}}\index{ph::lta@{ph::lta}!UVW01@{UVW01}}}\Hypertarget{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9ddac75c6f8c5e1c2970cf2feaf8a7331651}\label{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9dd} 
UVW01&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Discrete@{Discrete}!ph::lta@{ph::lta}}\index{ph::lta@{ph::lta}!Discrete@{Discrete}}}\Hypertarget{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9dda4984667940802dedc139aa7a430a6553}\label{namespaceph_1_1lta_a517f9714c97ec4a5bcdd5beae0eaf9dd} 
Discrete&\\
\hline

\end{DoxyEnumFields}
\Hypertarget{namespaceph_1_1lta_a780154430f4189e2ebe4fadc88efd0bb}\index{ph::lta@{ph::lta}!EMISStyle@{EMISStyle}}
\index{EMISStyle@{EMISStyle}!ph::lta@{ph::lta}}
\doxysubsubsection{\texorpdfstring{EMISStyle}{EMISStyle}}
{\footnotesize\ttfamily \label{namespaceph_1_1lta_a780154430f4189e2ebe4fadc88efd0bb} 
enum class \mbox{\hyperlink{namespaceph_1_1lta_a780154430f4189e2ebe4fadc88efd0bb}{ph\+::lta\+::\+EMISStyle}} \+: uint8\hspace{0.3cm}{\ttfamily [strong]}}



Type of Multiple Importance Sampling (MIS). 

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{Balance@{Balance}!ph::lta@{ph::lta}}\index{ph::lta@{ph::lta}!Balance@{Balance}}}\Hypertarget{namespaceph_1_1lta_a780154430f4189e2ebe4fadc88efd0bba99a808d8d16122d70e44bd7f709d30fb}\label{namespaceph_1_1lta_a780154430f4189e2ebe4fadc88efd0bb} 
Balance&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Power@{Power}!ph::lta@{ph::lta}}\index{ph::lta@{ph::lta}!Power@{Power}}}\Hypertarget{namespaceph_1_1lta_a780154430f4189e2ebe4fadc88efd0bbadd4fe0cc913f704600b97d1f5dd285de}\label{namespaceph_1_1lta_a780154430f4189e2ebe4fadc88efd0bb} 
Power&\\
\hline

\end{DoxyEnumFields}
\Hypertarget{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17d}\index{ph::lta@{ph::lta}!ESidednessPolicy@{ESidednessPolicy}}
\index{ESidednessPolicy@{ESidednessPolicy}!ph::lta@{ph::lta}}
\doxysubsubsection{\texorpdfstring{ESidednessPolicy}{ESidednessPolicy}}
{\footnotesize\ttfamily \label{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17d} 
enum class \mbox{\hyperlink{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17d}{ph\+::lta\+::\+ESidedness\+Policy}}\hspace{0.3cm}{\ttfamily [strong]}}

Options for dealing with situations where a vector is within the hemisphere defined by geometry normal but outside the one defined by shading normal or vice versa. \begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{DoNotCare@{DoNotCare}!ph::lta@{ph::lta}}\index{ph::lta@{ph::lta}!DoNotCare@{DoNotCare}}}\Hypertarget{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17dae9bfe1a1271065147039d9a297a4c785}\label{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17d} 
Do\+Not\+Care&Perform any calculations without caring sidedness agreement. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Strict@{Strict}!ph::lta@{ph::lta}}\index{ph::lta@{ph::lta}!Strict@{Strict}}}\Hypertarget{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17da2e979835dd62324f5bfe217449ba4974}\label{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17d} 
Strict&A vector must lies in hemispheres defined by geometry normal and shading normal simultaneously. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{TrustGeometry@{TrustGeometry}!ph::lta@{ph::lta}}\index{ph::lta@{ph::lta}!TrustGeometry@{TrustGeometry}}}\Hypertarget{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17da4a2e14f37fb676f4c83b874ddeaf35e3}\label{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17d} 
Trust\+Geometry&Judging sidedness agreement solely on geometry normal. \\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{TrustShading@{TrustShading}!ph::lta@{ph::lta}}\index{ph::lta@{ph::lta}!TrustShading@{TrustShading}}}\Hypertarget{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17dab6e0902c88f013423a338605519edaf4}\label{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17d} 
Trust\+Shading&Judging sidedness agreement solely on shading normal. \\
\hline

\end{DoxyEnumFields}
\Hypertarget{namespaceph_1_1lta_a3f1c39ae8879cc69ac22c3be15f9669b}\index{ph::lta@{ph::lta}!ETransport@{ETransport}}
\index{ETransport@{ETransport}!ph::lta@{ph::lta}}
\doxysubsubsection{\texorpdfstring{ETransport}{ETransport}}
{\footnotesize\ttfamily \label{namespaceph_1_1lta_a3f1c39ae8879cc69ac22c3be15f9669b} 
enum class \mbox{\hyperlink{namespaceph_1_1lta_a3f1c39ae8879cc69ac22c3be15f9669b}{ph\+::lta\+::\+ETransport}}\hspace{0.3cm}{\ttfamily [strong]}}



Type of the transported quantity. 

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{Radiance@{Radiance}!ph::lta@{ph::lta}}\index{ph::lta@{ph::lta}!Radiance@{Radiance}}}\Hypertarget{namespaceph_1_1lta_a3f1c39ae8879cc69ac22c3be15f9669ba955d9ba35580bdcc7bed3f11736b0f76}\label{namespaceph_1_1lta_a3f1c39ae8879cc69ac22c3be15f9669b} 
Radiance&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Importance@{Importance}!ph::lta@{ph::lta}}\index{ph::lta@{ph::lta}!Importance@{Importance}}}\Hypertarget{namespaceph_1_1lta_a3f1c39ae8879cc69ac22c3be15f9669baf0d806461f33568d758feb27d468352a}\label{namespaceph_1_1lta_a3f1c39ae8879cc69ac22c3be15f9669b} 
Importance&\\
\hline

\end{DoxyEnumFields}


\doxysubsection{Function Documentation}
\Hypertarget{namespaceph_1_1lta_af768ce875381b972a702a221c9800a50}\index{ph::lta@{ph::lta}!importance\_BSDF\_Ns\_corrector@{importance\_BSDF\_Ns\_corrector}}
\index{importance\_BSDF\_Ns\_corrector@{importance\_BSDF\_Ns\_corrector}!ph::lta@{ph::lta}}
\doxysubsubsection{\texorpdfstring{importance\_BSDF\_Ns\_corrector()}{importance\_BSDF\_Ns\_corrector()}}
{\footnotesize\ttfamily \label{namespaceph_1_1lta_af768ce875381b972a702a221c9800a50} 
real ph\+::lta\+::importance\+\_\+\+BSDF\+\_\+\+Ns\+\_\+corrector (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&}]{Ns}{, }\item[{const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&}]{Ng}{, }\item[{const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&}]{V}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

This correction factor is for the same reason as {\ttfamily \doxylink{namespaceph_1_1lta_a1669152400e7fb4f968fae1a6211cc2c}{importance\+\_\+scatter\+\_\+\+Ns\+\_\+corrector()}}, to restore the consistency of importance transport when shading normal is used for light transport. This factor works on the BSDF itself only. Using this factor accounts the fact that shading normals make a BSDF asymmetric during light/importance transport.

This factor does not take the geometry factor {\ttfamily Ns.\+dot(\+L)} into account. It considers the BSDF only.


\begin{DoxyParams}{Parameters}
{\em Ns} & Shading normal. \\
\hline
{\em Ng} & \doxylink{classph_1_1_geometry}{Geometry} normal. \\
\hline
{\em V} & Direction of excitant importance.\\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
All vectors are expected to be in unit length and leaving the surface. 
\end{DoxyNote}
\Hypertarget{namespaceph_1_1lta_a1669152400e7fb4f968fae1a6211cc2c}\index{ph::lta@{ph::lta}!importance\_scatter\_Ns\_corrector@{importance\_scatter\_Ns\_corrector}}
\index{importance\_scatter\_Ns\_corrector@{importance\_scatter\_Ns\_corrector}!ph::lta@{ph::lta}}
\doxysubsubsection{\texorpdfstring{importance\_scatter\_Ns\_corrector()}{importance\_scatter\_Ns\_corrector()}}
{\footnotesize\ttfamily \label{namespaceph_1_1lta_a1669152400e7fb4f968fae1a6211cc2c} 
real ph\+::lta\+::importance\+\_\+scatter\+\_\+\+Ns\+\_\+corrector (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&}]{Ns}{, }\item[{const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&}]{Ng}{, }\item[{const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&}]{L}{, }\item[{const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&}]{V}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Using shading normal for light transport algorithms is equivalent to using asymmetric BSDFs. This can lead to inconsistent results between regular and adjoint algorithms. This correction factor, when multiplied with the weight of an importance scatter event, restores the consistency when adjoint algorithms also use shading normals during importance transport.

This factor also considers the geometry factor {\ttfamily Ns.\+dot(\+L)}. The geometry factor is expected to be used (multiplied) together with this factor.

References\+: \mbox{[}1\mbox{]} Eric Veach, "{}\+Non-\/symmetric Scattering in Light Transport Algorithms"{}, Eurographics Rendering Workshop 1996 Proceedings.


\begin{DoxyParams}{Parameters}
{\em Ns} & Shading normal. \\
\hline
{\em Ng} & \doxylink{classph_1_1_geometry}{Geometry} normal. \\
\hline
{\em L} & Direction of incident importance. \\
\hline
{\em V} & Direction of excitant importance.\\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
All vectors are expected to be in unit length and leaving the surface. 
\end{DoxyNote}
\Hypertarget{namespaceph_1_1lta_a90b17b807b0048a147f97ee48bbaa6bd}\index{ph::lta@{ph::lta}!pdfA\_to\_pdfW@{pdfA\_to\_pdfW}}
\index{pdfA\_to\_pdfW@{pdfA\_to\_pdfW}!ph::lta@{ph::lta}}
\doxysubsubsection{\texorpdfstring{pdfA\_to\_pdfW()}{pdfA\_to\_pdfW()}}
{\footnotesize\ttfamily \label{namespaceph_1_1lta_a90b17b807b0048a147f97ee48bbaa6bd} 
real ph\+::lta\+::pdf\+A\+\_\+to\+\_\+pdfW (\begin{DoxyParamCaption}\item[{const real}]{pdfA}{, }\item[{const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&}]{d\+APos\+To\+Target\+Pos}{, }\item[{const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&}]{d\+ANormal}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Transform area domain \doxylink{classph_1_1lta_1_1_p_d_f}{PDF} to solid angle domain \doxylink{classph_1_1lta_1_1_p_d_f}{PDF} w.\+r.\+t. a position. 

\Hypertarget{namespaceph_1_1lta_ac017a110ee09b8cb7c2d5b0b1ff10f11}\index{ph::lta@{ph::lta}!tamed\_importance\_BSDF\_Ns\_corrector@{tamed\_importance\_BSDF\_Ns\_corrector}}
\index{tamed\_importance\_BSDF\_Ns\_corrector@{tamed\_importance\_BSDF\_Ns\_corrector}!ph::lta@{ph::lta}}
\doxysubsubsection{\texorpdfstring{tamed\_importance\_BSDF\_Ns\_corrector()}{tamed\_importance\_BSDF\_Ns\_corrector()}}
{\footnotesize\ttfamily \label{namespaceph_1_1lta_ac017a110ee09b8cb7c2d5b0b1ff10f11} 
real ph\+::lta\+::tamed\+\_\+importance\+\_\+\+BSDF\+\_\+\+Ns\+\_\+corrector (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&}]{Ns}{, }\item[{const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&}]{Ng}{, }\item[{const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&}]{V}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Smoother version of {\ttfamily \doxylink{namespaceph_1_1lta_af768ce875381b972a702a221c9800a50}{importance\+\_\+\+BSDF\+\_\+\+Ns\+\_\+corrector()}}. See {\ttfamily \doxylink{namespaceph_1_1lta_ab2afad625c810a9f23c2d71d9c07031f}{tamed\+\_\+importance\+\_\+scatter\+\_\+\+Ns\+\_\+corrector()}} for explanation. 

\Hypertarget{namespaceph_1_1lta_ab2afad625c810a9f23c2d71d9c07031f}\index{ph::lta@{ph::lta}!tamed\_importance\_scatter\_Ns\_corrector@{tamed\_importance\_scatter\_Ns\_corrector}}
\index{tamed\_importance\_scatter\_Ns\_corrector@{tamed\_importance\_scatter\_Ns\_corrector}!ph::lta@{ph::lta}}
\doxysubsubsection{\texorpdfstring{tamed\_importance\_scatter\_Ns\_corrector()}{tamed\_importance\_scatter\_Ns\_corrector()}}
{\footnotesize\ttfamily \label{namespaceph_1_1lta_ab2afad625c810a9f23c2d71d9c07031f} 
real ph\+::lta\+::tamed\+\_\+importance\+\_\+scatter\+\_\+\+Ns\+\_\+corrector (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&}]{Ns}{, }\item[{const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&}]{Ng}{, }\item[{const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&}]{L}{, }\item[{const \mbox{\hyperlink{namespaceph_1_1math_a7f5d9bea70db00eb52ece79b05e544c8}{math\+::\+Vector3R}} \&}]{V}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Smoother version of {\ttfamily \doxylink{namespaceph_1_1lta_a1669152400e7fb4f968fae1a6211cc2c}{importance\+\_\+scatter\+\_\+\+Ns\+\_\+corrector()}}. 

The weighting for importance transport is only correct (same scene interpretation and rendered result) if we account for the BSDF asymmetry when shading normal is used. However, this factor introduces high variance (big firefly marks). This version attempts to lower the variance by removing large correction factor (and this introduces bias, though not easily noticeable).

In PBRT-\/v3, this factor is completely ignored. In Mitsuba 0.\+6, this factor is only applied on last bounce, i.\+e., during radiance estimation (applying the {\ttfamily \doxylink{namespaceph_1_1lta_af768ce875381b972a702a221c9800a50}{importance\+\_\+\+BSDF\+\_\+\+Ns\+\_\+corrector()}}, not the scattering/throughput one). 