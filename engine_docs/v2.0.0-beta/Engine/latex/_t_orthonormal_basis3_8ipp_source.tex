\doxysection{TOrthonormal\+Basis3.\+ipp}
\hypertarget{_t_orthonormal_basis3_8ipp_source}{}\label{_t_orthonormal_basis3_8ipp_source}\index{Source/Math/TOrthonormalBasis3.ipp@{Source/Math/TOrthonormalBasis3.ipp}}
\mbox{\hyperlink{_t_orthonormal_basis3_8ipp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_t_orthonormal_basis3_8h}{Math/TOrthonormalBasis3.h}}"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{math_8h}{Math/math.h}}"{}}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <Common/assertion.h>}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <cmath>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <limits>}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceph_1_1math}{ph::math}}}
\DoxyCodeLine{00013\ \{}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00015\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00016\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3}{TOrthonormalBasis3<T>}}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_a4c527b1dd22229b5cb47d55b8a804592}{TOrthonormalBasis3<T>::makeFromUnitY}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ unitYAxis)}
\DoxyCodeLine{00017\ \{}
\DoxyCodeLine{00018\ \ \ \ \ PH\_ASSERT\_IN\_RANGE(unitYAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector_n_base_acfa70203a3b892f2a545a344d5ab9e43}{lengthSquared}}(),\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(0.9),\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(1.1));}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{comment}{//\ choose\ an\ axis\ deviate\ enough\ to\ specified\ y-\/axis\ to\ perform\ cross\ product\ in\ order\ to\ avoid\ some\ }}
\DoxyCodeLine{00021\ \ \ \ \ \textcolor{comment}{//\ numerical\ errors}}
\DoxyCodeLine{00022\ \ \ \ \ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\ unitXAxis;}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keywordflow}{if}(std::abs(unitYAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector3_a0a5f0880f6b82a8519416ca9a987818b}{y}}())\ <\ \mbox{\hyperlink{namespaceph_1_1math_1_1constant_a605e5078513fc3c3e16781b5d06c7868}{constant::rcp\_sqrt\_2<real>}})}
\DoxyCodeLine{00024\ \ \ \ \ \{}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ unitXAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector_n_base_a66bef10def6b7cfc11adea52b28094e0}{set}}(\{-\/unitYAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector3_a34d51b9c12196175c8ad04c2cd9c59ec}{z}}(),\ T(0),\ unitYAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector3_a8d0eb557cecca2a3e07326c409b2c16b}{x}}()\});\textcolor{comment}{//\ yAxis\ cross\ (0,\ 1,\ 0)}}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ unitXAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector_n_base_ab2c2c0e821a2752db5eab046a8b945a3}{mulLocal}}(T(1)\ /\ std::sqrt(unitXAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector3_a8d0eb557cecca2a3e07326c409b2c16b}{x}}()\ *\ unitXAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector3_a8d0eb557cecca2a3e07326c409b2c16b}{x}}()\ +\ unitXAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector3_a34d51b9c12196175c8ad04c2cd9c59ec}{z}}()\ *\ unitXAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector3_a34d51b9c12196175c8ad04c2cd9c59ec}{z}}()));}
\DoxyCodeLine{00027\ \ \ \ \ \}}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00029\ \ \ \ \ \{}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ unitXAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector_n_base_a66bef10def6b7cfc11adea52b28094e0}{set}}(\{unitYAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector3_a0a5f0880f6b82a8519416ca9a987818b}{y}}(),\ -\/unitYAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector3_a8d0eb557cecca2a3e07326c409b2c16b}{x}}(),\ T(0)\});\textcolor{comment}{//\ yAxis\ cross\ (0,\ 0,\ 1)}}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ unitXAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector_n_base_ab2c2c0e821a2752db5eab046a8b945a3}{mulLocal}}(T(1)\ /\ std::sqrt(unitXAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector3_a8d0eb557cecca2a3e07326c409b2c16b}{x}}()\ *\ unitXAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector3_a8d0eb557cecca2a3e07326c409b2c16b}{x}}()\ +\ unitXAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector3_a0a5f0880f6b82a8519416ca9a987818b}{y}}()\ *\ unitXAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector3_a0a5f0880f6b82a8519416ca9a987818b}{y}}()));}
\DoxyCodeLine{00032\ \ \ \ \ \}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\ unitZAxis\ =\ unitXAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector3_af997e9ea9607169887f9065835d760c0}{cross}}(unitYAxis);}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \ \ PH\_ASSERT\_IN\_RANGE(unitXAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector_n_base_acfa70203a3b892f2a545a344d5ab9e43}{lengthSquared}}(),\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(0.9),\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(1.1));}
\DoxyCodeLine{00037\ \ \ \ \ PH\_ASSERT\_IN\_RANGE(unitZAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector_n_base_acfa70203a3b892f2a545a344d5ab9e43}{lengthSquared}}(),\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(0.9),\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(1.1));}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3}{TOrthonormalBasis3}}(unitXAxis,\ unitYAxis,\ unitZAxis);}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{comment}{//\ TEST}}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{comment}{/*std::cerr\ <<\ std::setprecision(20);}}
\DoxyCodeLine{00043\ \textcolor{comment}{\ \ \ \ if(std::abs(out\_unitXaxis-\/>length()\ -\/\ 1.0\_r)\ >\ 0.000001\_r)}}
\DoxyCodeLine{00044\ \textcolor{comment}{\ \ \ \ \ \ \ \ std::cerr\ <<\ out\_unitXaxis-\/>length()\ <<\ std::endl;}}
\DoxyCodeLine{00045\ \textcolor{comment}{\ \ \ \ if(std::abs(out\_unitZaxis-\/>length()\ -\/\ 1.0\_r)\ >\ 0.000001\_r)}}
\DoxyCodeLine{00046\ \textcolor{comment}{\ \ \ \ \ \ \ \ std::cerr\ <<\ out\_unitZaxis-\/>length()\ <<\ std::endl;}}
\DoxyCodeLine{00047\ \textcolor{comment}{\ \ \ \ if(out\_unitXaxis-\/>dot(*out\_unitZaxis)\ >\ 0.000001\_r)}}
\DoxyCodeLine{00048\ \textcolor{comment}{\ \ \ \ \ \ \ \ std::cerr\ <<\ out\_unitXaxis-\/>dot(*out\_unitZaxis)\ <<\ std::endl;}}
\DoxyCodeLine{00049\ \textcolor{comment}{\ \ \ \ if(out\_unitZaxis-\/>dot(unitYaxis)\ >\ 0.000001\_r)}}
\DoxyCodeLine{00050\ \textcolor{comment}{\ \ \ \ \ \ \ \ std::cerr\ <<\ out\_unitZaxis-\/>dot(unitYaxis)\ <<\ std::endl;}}
\DoxyCodeLine{00051\ \textcolor{comment}{\ \ \ \ if(unitYaxis.dot(*out\_unitXaxis)\ >\ 0.000001\_r)}}
\DoxyCodeLine{00052\ \textcolor{comment}{\ \ \ \ \ \ \ \ std::cerr\ <<\ unitYaxis.dot(*out\_unitXaxis)\ <<\ std::endl;*/}}
\DoxyCodeLine{00053\ \}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00056\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_af86f7b3c88091e0b527997392e7a2d4c}{TOrthonormalBasis3<T>::TOrthonormalBasis3}}()\ :}
\DoxyCodeLine{00057\ \ \ \ \ m\_xAxis(1,\ 0,\ 0),}
\DoxyCodeLine{00058\ \ \ \ \ m\_yAxis(0,\ 1,\ 0),}
\DoxyCodeLine{00059\ \ \ \ \ m\_zAxis(0,\ 0,\ 1)}
\DoxyCodeLine{00060\ \{\}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00063\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_af86f7b3c88091e0b527997392e7a2d4c}{TOrthonormalBasis3<T>::TOrthonormalBasis3}}(}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ xAxis,}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ yAxis,\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ zAxis)}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ :\ m\_xAxis(xAxis)}
\DoxyCodeLine{00069\ \ \ \ \ ,\ m\_yAxis(yAxis)}
\DoxyCodeLine{00070\ \ \ \ \ ,\ m\_zAxis(zAxis)}
\DoxyCodeLine{00071\ \{}
\DoxyCodeLine{00072\ \ \ \ \ PH\_ASSERT\_IN\_RANGE(xAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector_n_base_acfa70203a3b892f2a545a344d5ab9e43}{lengthSquared}}(),\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(0.9),\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(1.1));}
\DoxyCodeLine{00073\ \ \ \ \ PH\_ASSERT\_IN\_RANGE(yAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector_n_base_acfa70203a3b892f2a545a344d5ab9e43}{lengthSquared}}(),\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(0.9),\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(1.1));}
\DoxyCodeLine{00074\ \ \ \ \ PH\_ASSERT\_IN\_RANGE(zAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector_n_base_acfa70203a3b892f2a545a344d5ab9e43}{lengthSquared}}(),\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(0.9),\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(1.1));}
\DoxyCodeLine{00075\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00078\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_a0f7cfe829b14de51d6b0992331cef087}{TOrthonormalBasis3<T>::worldToLocal}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ worldVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00079\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}(m\_xAxis.dot(worldVec),}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_yAxis.dot(worldVec),\ }
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_zAxis.dot(worldVec));}
\DoxyCodeLine{00083\ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00086\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_afec03f05361afa009eea63e8baae5742}{TOrthonormalBasis3<T>::localToWorld}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ localVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00087\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_xAxis.\mbox{\hyperlink{classph_1_1math_1_1_t_vector_n_base_a15602e64861b8d4b90033e87b168b846}{mul}}(localVec.\mbox{\hyperlink{classph_1_1math_1_1_t_vector3_a8d0eb557cecca2a3e07326c409b2c16b}{x}}()).add(}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ m\_yAxis.mul(localVec.\mbox{\hyperlink{classph_1_1math_1_1_t_vector3_a0a5f0880f6b82a8519416ca9a987818b}{y}}())).add(}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ m\_zAxis.mul(localVec.\mbox{\hyperlink{classph_1_1math_1_1_t_vector3_a34d51b9c12196175c8ad04c2cd9c59ec}{z}}()));}
\DoxyCodeLine{00091\ \}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00094\ \textcolor{keyword}{inline}\ T\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_ae61ee338d90a34485c3065f9ef50f8d8}{TOrthonormalBasis3<T>::cosPhi}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00095\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keyword}{const}\ T\ zProjection\ =\ unitVec.\mbox{\hyperlink{classph_1_1math_1_1_t_vector_n_base_a798d064dc3ff4c11b536919418b2e2d5}{dot}}(m\_zAxis);}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keyword}{const}\ T\ rProjection\ =\ sinTheta(unitVec);}
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1math_a0090b0ad2b7785d02c6761c1766066cc}{math::safe\_clamp}}(zProjection\ /\ rProjection,\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(-\/1),\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(1));}
\DoxyCodeLine{00099\ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00102\ \textcolor{keyword}{inline}\ T\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_a910aca8952c85562e162c93877547b4c}{TOrthonormalBasis3<T>::sinPhi}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00103\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00104\ \ \ \ \ \textcolor{keyword}{const}\ T\ xProjection\ =\ unitVec.\mbox{\hyperlink{classph_1_1math_1_1_t_vector_n_base_a798d064dc3ff4c11b536919418b2e2d5}{dot}}(m\_xAxis);}
\DoxyCodeLine{00105\ \ \ \ \ \textcolor{keyword}{const}\ T\ rProjection\ =\ sinTheta(unitVec);}
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1math_a0090b0ad2b7785d02c6761c1766066cc}{math::safe\_clamp}}(xProjection\ /\ rProjection,\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(-\/1),\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(1));}
\DoxyCodeLine{00107\ \}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00110\ \textcolor{keyword}{inline}\ T\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_a63e2ac8a48a523843377756a6b235b33}{TOrthonormalBasis3<T>::tanPhi}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00111\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keyword}{const}\ T\ zProjection\ =\ unitVec.\mbox{\hyperlink{classph_1_1math_1_1_t_vector_n_base_a798d064dc3ff4c11b536919418b2e2d5}{dot}}(m\_zAxis);}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keyword}{const}\ T\ xProjection\ =\ unitVec.\mbox{\hyperlink{classph_1_1math_1_1_t_vector_n_base_a798d064dc3ff4c11b536919418b2e2d5}{dot}}(m\_xAxis);}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keyword}{const}\ T\ tanP\ =\ xProjection\ /\ zProjection;}
\DoxyCodeLine{00115\ \ \ \ \ \textcolor{keywordflow}{return}\ std::isfinite(tanP)\ ?\ tanP\ :\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(0);}
\DoxyCodeLine{00116\ \}}
\DoxyCodeLine{00117\ }
\DoxyCodeLine{00118\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00119\ \textcolor{keyword}{inline}\ T\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_ac0ae89d5156f0f8b15623584144d05e0}{TOrthonormalBasis3<T>::cos2Phi}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00120\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1math_a3d95f12613138cf607ca4b4b0c04ea48}{math::squared}}(cosPhi(unitVec));}
\DoxyCodeLine{00122\ \}}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00125\ \textcolor{keyword}{inline}\ T\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_ab644d7d477f53a694afb3fa7ad9b8c5e}{TOrthonormalBasis3<T>::sin2Phi}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00126\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1math_a3d95f12613138cf607ca4b4b0c04ea48}{math::squared}}(sinPhi(unitVec));}
\DoxyCodeLine{00128\ \}}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00131\ \textcolor{keyword}{inline}\ T\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_adf2b94a34f4d96add15967aebefb6b95}{TOrthonormalBasis3<T>::tan2Phi}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00132\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keyword}{const}\ T\ cos2P\ =\ cos2Phi(unitVec);}
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{keyword}{const}\ T\ sin2P\ =\ 1\ -\/\ cos2P;}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keyword}{const}\ T\ tan2P\ =\ sin2P\ /\ cos2P;}
\DoxyCodeLine{00136\ \ \ \ \ PH\_ASSERT(tan2P\ >=\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(0)\ ||\ !std::isfinite(tan2P));}
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keywordflow}{return}\ std::isfinite(tan2P)\ ?\ tan2P\ :\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(0);}
\DoxyCodeLine{00138\ \}}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00141\ \textcolor{keyword}{inline}\ T\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_ab00ce530fd0a2d81b1fc764f5e1eeae1}{TOrthonormalBasis3<T>::cosTheta}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00142\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1math_af8f390358e5ac8042dde889f48d9aaa4}{math::clamp}}(m\_yAxis.dot(unitVec),\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(-\/1),\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(1));}
\DoxyCodeLine{00144\ \}}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00147\ \textcolor{keyword}{inline}\ T\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_a7f91a957c54f874c0d0bf6516b5a81d8}{TOrthonormalBasis3<T>::sinTheta}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00148\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keywordflow}{return}\ std::sqrt(sin2Theta(unitVec));}
\DoxyCodeLine{00150\ \}}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00153\ \textcolor{keyword}{inline}\ T\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_a5e69fd64023fe5b4c44a55622415d472}{TOrthonormalBasis3<T>::tanTheta}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00154\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keyword}{const}\ T\ cosT\ =\ cosTheta(unitVec);}
\DoxyCodeLine{00156\ \ \ \ \ \textcolor{keyword}{const}\ T\ tanT\ =\ sinTheta(unitVec)\ /\ cosT;}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keywordflow}{return}\ std::isfinite(tanT)\ ?\ tanT\ :\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(0);}
\DoxyCodeLine{00158\ \}}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00161\ \textcolor{keyword}{inline}\ T\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_a0ef75a37f90af1da0b37f77b970c8dcc}{TOrthonormalBasis3<T>::absCosTheta}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00162\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keywordflow}{return}\ std::abs(cosTheta(unitVec));}
\DoxyCodeLine{00164\ \}}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00167\ \textcolor{keyword}{inline}\ T\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_a8af2319cb1d298508b165ba22ff8edd4}{TOrthonormalBasis3<T>::absSinTheta}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00168\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordflow}{return}\ std::abs(sinTheta(unitVec));}
\DoxyCodeLine{00170\ \}}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00173\ \textcolor{keyword}{inline}\ T\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_ae5e0e912f74255199b807d0f0624ad46}{TOrthonormalBasis3<T>::cos2Theta}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00174\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00175\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1math_a3d95f12613138cf607ca4b4b0c04ea48}{math::squared}}(cosTheta(unitVec));}
\DoxyCodeLine{00176\ \}}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00179\ \textcolor{keyword}{inline}\ T\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_a7249c3fe26052bbe8a3c93b9772e010a}{TOrthonormalBasis3<T>::sin2Theta}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00180\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00181\ \ \ \ \ \textcolor{keywordflow}{return}\ 1\ -\/\ cos2Theta(unitVec);}
\DoxyCodeLine{00182\ \}}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00185\ \textcolor{keyword}{inline}\ T\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_a7b507cd000d0d5c55ebf0bdef2ff745b}{TOrthonormalBasis3<T>::tan2Theta}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00186\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00187\ \ \ \ \ \textcolor{keyword}{const}\ T\ cos2T\ =\ cos2Theta(unitVec);}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keyword}{const}\ T\ sin2T\ =\ 1\ -\/\ cos2T;}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{keyword}{const}\ T\ tan2T\ =\ sin2T\ /\ cos2T;}
\DoxyCodeLine{00190\ \ \ \ \ PH\_ASSERT(tan2T\ >=\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(0)\ ||\ !std::isfinite(tan2T));}
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{keywordflow}{return}\ std::isfinite(tan2T)\ ?\ tan2T\ :\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(0);}
\DoxyCodeLine{00192\ \}}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00195\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3}{TOrthonormalBasis3<T>}}\&\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_a4cf958e335bc7a1d634e6a16d0355853}{TOrthonormalBasis3<T>::renormalize}}()}
\DoxyCodeLine{00196\ \{}
\DoxyCodeLine{00197\ \ \ \ \ renormalizeXAxis();}
\DoxyCodeLine{00198\ \ \ \ \ renormalizeYAxis();}
\DoxyCodeLine{00199\ \ \ \ \ renormalizeZAxis();}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00202\ \}}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00205\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3}{TOrthonormalBasis3<T>}}\&\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_aaf3c28a9fab2ae56b313125119b31132}{TOrthonormalBasis3<T>::renormalizeXAxis}}()}
\DoxyCodeLine{00206\ \{}
\DoxyCodeLine{00207\ \ \ \ \ m\_xAxis.normalizeLocal();}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00210\ \}}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00213\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3}{TOrthonormalBasis3<T>}}\&\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_acb4035fa6dc3c5a1e2e3b8f1c98139d3}{TOrthonormalBasis3<T>::renormalizeYAxis}}()}
\DoxyCodeLine{00214\ \{}
\DoxyCodeLine{00215\ \ \ \ \ m\_yAxis.normalizeLocal();}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00218\ \}}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00221\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3}{TOrthonormalBasis3<T>}}\&\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_aa3afe51b649ca4a8baa7ad6318c5b4e7}{TOrthonormalBasis3<T>::renormalizeZAxis}}()}
\DoxyCodeLine{00222\ \{}
\DoxyCodeLine{00223\ \ \ \ \ m\_zAxis.normalizeLocal();}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00226\ \}}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00229\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3}{TOrthonormalBasis3<T>}}\&\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_a6b8eab0936140eb577e6c720d41cb433}{TOrthonormalBasis3<T>::setXAxis}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ axis)}
\DoxyCodeLine{00230\ \{}
\DoxyCodeLine{00231\ \ \ \ \ m\_xAxis\ =\ axis;}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00233\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00234\ \}}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00237\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3}{TOrthonormalBasis3<T>}}\&\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_aec974bee9985d43ac483788ba177583c}{TOrthonormalBasis3<T>::setYAxis}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ axis)}
\DoxyCodeLine{00238\ \{}
\DoxyCodeLine{00239\ \ \ \ \ m\_yAxis\ =\ axis;}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00242\ \}}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00244\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00245\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3}{TOrthonormalBasis3<T>}}\&\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_a9a03fb3bed582a92ed2e7f21883dd1c6}{TOrthonormalBasis3<T>::setZAxis}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ axis)}
\DoxyCodeLine{00246\ \{}
\DoxyCodeLine{00247\ \ \ \ \ m\_zAxis\ =\ axis;}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00250\ \}}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00253\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3}{TOrthonormalBasis3<T>}}\&\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_a437c567a018e401b7b26d2d6247359f7}{TOrthonormalBasis3<T>::set}}(}
\DoxyCodeLine{00254\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ xAxis,}
\DoxyCodeLine{00255\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ yAxis,}
\DoxyCodeLine{00256\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\&\ zAxis)}
\DoxyCodeLine{00257\ \{}
\DoxyCodeLine{00258\ \ \ \ \ m\_xAxis\ =\ xAxis;}
\DoxyCodeLine{00259\ \ \ \ \ m\_yAxis\ =\ yAxis;}
\DoxyCodeLine{00260\ \ \ \ \ m\_zAxis\ =\ zAxis;}
\DoxyCodeLine{00261\ }
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00263\ \}}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00265\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00266\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_a55e62a1e93af1285f0f9bab36b8f0b6e}{TOrthonormalBasis3<T>::getXAxis}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00267\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00268\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_xAxis;}
\DoxyCodeLine{00269\ \}}
\DoxyCodeLine{00270\ }
\DoxyCodeLine{00271\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00272\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_a292a84d14f5ded9fcb640de83d2289d0}{TOrthonormalBasis3<T>::getYAxis}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00273\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_yAxis;}
\DoxyCodeLine{00275\ \}}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00277\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00278\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{TVector3<T>}}\ \mbox{\hyperlink{classph_1_1math_1_1_t_orthonormal_basis3_a2da892795c848c0801eb782650117d3b}{TOrthonormalBasis3<T>::getZAxis}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00279\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00280\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_zAxis;}
\DoxyCodeLine{00281\ \}}
\DoxyCodeLine{00282\ }
\DoxyCodeLine{00283\ \}\textcolor{comment}{//\ end\ namespace\ ph::math}}

\end{DoxyCode}
