\doxysection{ph\+::lta\+::TDirect\+Light\+Estimator\texorpdfstring{$<$}{<} POLICY \texorpdfstring{$>$}{>} Class Template Reference}
\hypertarget{classph_1_1lta_1_1_t_direct_light_estimator}{}\label{classph_1_1lta_1_1_t_direct_light_estimator}\index{ph::lta::TDirectLightEstimator$<$ POLICY $>$@{ph::lta::TDirectLightEstimator$<$ POLICY $>$}}


Estimate direct lighting for a surface point. This is a lightweight helper type for estimating direct lighting. Do not think "{}direct light"{} as lighting from a directional light source, it means the first-\/bounce lighting for any surface point, and the surface point can be the N-\/th one in a path.  




{\ttfamily \#include $<$TDirect\+Light\+Estimator.\+h$>$}

\doxysubsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classph_1_1lta_1_1_t_direct_light_estimator_a63a04ec0df7e6dc1b5095b10f317236c}{TDirect\+Light\+Estimator}} (const \mbox{\hyperlink{classph_1_1_scene}{Scene}} \texorpdfstring{$\ast$}{*}scene)
\item 
bool \mbox{\hyperlink{classph_1_1lta_1_1_t_direct_light_estimator_a245f268857c8bb9988e766c95d6406a5}{bsdf\+Sample\+Emission}} (\mbox{\hyperlink{classph_1_1_bsdf_sample_query}{Bsdf\+Sample\+Query}} \&bsdf\+Sample, \mbox{\hyperlink{classph_1_1_sample_flow}{Sample\+Flow}} \&sample\+Flow, \mbox{\hyperlink{namespaceph_1_1math_ad1ddf3801f5a9ea201227d49747987ed}{math\+::\+Spectrum}} \texorpdfstring{$\ast$}{*}out\+\_\+\+Le=nullptr, std\+::optional$<$ \mbox{\hyperlink{classph_1_1_surface_hit}{Surface\+Hit}} $>$ \texorpdfstring{$\ast$}{*}out\+\_\+X=nullptr) const
\begin{DoxyCompactList}\small\item\em \doxylink{classph_1_1_sample}{Sample} lighting using BSDF\textquotesingle{}s suggestion. A light sampling technique that is always valid. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classph_1_1lta_1_1_t_direct_light_estimator_aaf17280d6b32cb7ae5037251523f5eaf}{nee\+Sample\+Emission}} (\mbox{\hyperlink{classph_1_1_direct_energy_sample_query}{Direct\+Energy\+Sample\+Query}} \&direct\+Sample, \mbox{\hyperlink{classph_1_1_sample_flow}{Sample\+Flow}} \&sample\+Flow, \mbox{\hyperlink{classph_1_1_surface_hit}{Surface\+Hit}} \texorpdfstring{$\ast$}{*}out\+\_\+\+Xe=nullptr) const
\begin{DoxyCompactList}\small\item\em \doxylink{classph_1_1_sample}{Sample} lighting using next-\/event estimation. This light sampling technique may not always be valid. Calling this method when {\ttfamily \doxylink{classph_1_1lta_1_1_t_direct_light_estimator_a6fd335f50bce1a71748affc54b550d0f}{is\+Nee\+Samplable()}} returns {\ttfamily false} is an error. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classph_1_1lta_1_1_t_direct_light_estimator_a0ab62eb48b7793411c4c0d07d928734e}{bsdf\+Sample\+Path\+With\+Nee}} (\mbox{\hyperlink{classph_1_1_bsdf_sample_query}{Bsdf\+Sample\+Query}} \&bsdf\+Sample, \mbox{\hyperlink{classph_1_1_sample_flow}{Sample\+Flow}} \&sample\+Flow, \mbox{\hyperlink{namespaceph_1_1math_ad1ddf3801f5a9ea201227d49747987ed}{math\+::\+Spectrum}} \texorpdfstring{$\ast$}{*}out\+\_\+\+Lo=nullptr, std\+::optional$<$ \mbox{\hyperlink{classph_1_1_surface_hit}{Surface\+Hit}} $>$ \texorpdfstring{$\ast$}{*}out\+\_\+X=nullptr) const
\begin{DoxyCompactList}\small\item\em \doxylink{classph_1_1_sample}{Sample} lighting by combining the techniques used by {\ttfamily bsdf\+Sample()} and {\ttfamily nee\+Sample()}. A light sampling technique that is always valid. \end{DoxyCompactList}\item 
real \mbox{\hyperlink{classph_1_1lta_1_1_t_direct_light_estimator_ae264d6fc1c916e86aa96e788b6d8a9f6}{nee\+Sample\+Pdf\+WUnoccluded}} (const \mbox{\hyperlink{classph_1_1_surface_hit}{Surface\+Hit}} \&X, const \mbox{\hyperlink{classph_1_1_surface_hit}{Surface\+Hit}} \&Xe) const
\begin{DoxyCompactList}\small\item\em Get the solid angle domain \doxylink{classph_1_1lta_1_1_p_d_f}{PDF} of an next-\/event estimation lighting sample. Surface occlusion is not taken into account. Calling this method when {\ttfamily \doxylink{classph_1_1lta_1_1_t_direct_light_estimator_a6fd335f50bce1a71748affc54b550d0f}{is\+Nee\+Samplable()}} returns {\ttfamily false} is an error. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classph_1_1lta_1_1_t_direct_light_estimator_a6fd335f50bce1a71748affc54b550d0f}{is\+Nee\+Samplable}} (const \mbox{\hyperlink{classph_1_1_surface_hit}{Surface\+Hit}} \&X) const
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$\mbox{\hyperlink{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17d}{ESidedness\+Policy}} POLICY$>$\newline
class ph\+::lta\+::\+TDirect\+Light\+Estimator$<$ POLICY $>$}
Estimate direct lighting for a surface point. This is a lightweight helper type for estimating direct lighting. Do not think "{}direct light"{} as lighting from a directional light source, it means the first-\/bounce lighting for any surface point, and the surface point can be the N-\/th one in a path. 


\begin{DoxyTemplParams}{Template Parameters}
{\em POLICY} & The default sidedness policy to use if none can be inferred from the inputs. \\
\hline
\end{DoxyTemplParams}


\doxysubsection{Constructor \& Destructor Documentation}
\Hypertarget{classph_1_1lta_1_1_t_direct_light_estimator_a63a04ec0df7e6dc1b5095b10f317236c}\index{ph::lta::TDirectLightEstimator$<$ POLICY $>$@{ph::lta::TDirectLightEstimator$<$ POLICY $>$}!TDirectLightEstimator@{TDirectLightEstimator}}
\index{TDirectLightEstimator@{TDirectLightEstimator}!ph::lta::TDirectLightEstimator$<$ POLICY $>$@{ph::lta::TDirectLightEstimator$<$ POLICY $>$}}
\doxysubsubsection{\texorpdfstring{TDirectLightEstimator()}{TDirectLightEstimator()}}
{\footnotesize\ttfamily \label{classph_1_1lta_1_1_t_direct_light_estimator_a63a04ec0df7e6dc1b5095b10f317236c} 
template$<$\mbox{\hyperlink{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17d}{ESidedness\+Policy}} POLICY$>$ \\
\mbox{\hyperlink{classph_1_1lta_1_1_t_direct_light_estimator}{ph\+::lta\+::\+TDirect\+Light\+Estimator}}$<$ POLICY $>$\+::\+TDirect\+Light\+Estimator (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classph_1_1_scene}{Scene}} \texorpdfstring{$\ast$}{*}}]{scene}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}



\doxysubsection{Member Function Documentation}
\Hypertarget{classph_1_1lta_1_1_t_direct_light_estimator_a245f268857c8bb9988e766c95d6406a5}\index{ph::lta::TDirectLightEstimator$<$ POLICY $>$@{ph::lta::TDirectLightEstimator$<$ POLICY $>$}!bsdfSampleEmission@{bsdfSampleEmission}}
\index{bsdfSampleEmission@{bsdfSampleEmission}!ph::lta::TDirectLightEstimator$<$ POLICY $>$@{ph::lta::TDirectLightEstimator$<$ POLICY $>$}}
\doxysubsubsection{\texorpdfstring{bsdfSampleEmission()}{bsdfSampleEmission()}}
{\footnotesize\ttfamily \label{classph_1_1lta_1_1_t_direct_light_estimator_a245f268857c8bb9988e766c95d6406a5} 
template$<$\mbox{\hyperlink{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17d}{ESidedness\+Policy}} POLICY$>$ \\
bool \mbox{\hyperlink{classph_1_1lta_1_1_t_direct_light_estimator}{ph\+::lta\+::\+TDirect\+Light\+Estimator}}$<$ POLICY $>$\+::bsdf\+Sample\+Emission (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classph_1_1_bsdf_sample_query}{Bsdf\+Sample\+Query}} \&}]{bsdf\+Sample}{, }\item[{\mbox{\hyperlink{classph_1_1_sample_flow}{Sample\+Flow}} \&}]{sample\+Flow}{, }\item[{\mbox{\hyperlink{namespaceph_1_1math_ad1ddf3801f5a9ea201227d49747987ed}{math\+::\+Spectrum}} \texorpdfstring{$\ast$}{*}}]{out\+\_\+\+Le}{ = {\ttfamily nullptr}, }\item[{std\+::optional$<$ \mbox{\hyperlink{classph_1_1_surface_hit}{Surface\+Hit}} $>$ \texorpdfstring{$\ast$}{*}}]{out\+\_\+X}{ = {\ttfamily nullptr}}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [nodiscard]}}



\doxylink{classph_1_1_sample}{Sample} lighting using BSDF\textquotesingle{}s suggestion. A light sampling technique that is always valid. 


\begin{DoxyParams}{Parameters}
{\em bsdf\+Sample} & BSDF sample result. Validity of its output should be explicitly tested before use. \\
\hline
{\em out\+\_\+\+Le} & The sampled emitted energy of another surface. Does not contain any weighting. \\
\hline
{\em out\+\_\+X} & Returns the surface that is sampled. It is not necessary an energy-\/emitting surface (as {\ttfamily out\+\_\+\+Le} could be 0 if {\ttfamily out\+\_\+X} is requested). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Whether output parameters are usable. If {\ttfamily false} is returned, the sample should still be treated as valid, albeit its contribution is effectively zero. 
\end{DoxyReturn}
\Hypertarget{classph_1_1lta_1_1_t_direct_light_estimator_a0ab62eb48b7793411c4c0d07d928734e}\index{ph::lta::TDirectLightEstimator$<$ POLICY $>$@{ph::lta::TDirectLightEstimator$<$ POLICY $>$}!bsdfSamplePathWithNee@{bsdfSamplePathWithNee}}
\index{bsdfSamplePathWithNee@{bsdfSamplePathWithNee}!ph::lta::TDirectLightEstimator$<$ POLICY $>$@{ph::lta::TDirectLightEstimator$<$ POLICY $>$}}
\doxysubsubsection{\texorpdfstring{bsdfSamplePathWithNee()}{bsdfSamplePathWithNee()}}
{\footnotesize\ttfamily \label{classph_1_1lta_1_1_t_direct_light_estimator_a0ab62eb48b7793411c4c0d07d928734e} 
template$<$\mbox{\hyperlink{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17d}{ESidedness\+Policy}} POLICY$>$ \\
bool \mbox{\hyperlink{classph_1_1lta_1_1_t_direct_light_estimator}{ph\+::lta\+::\+TDirect\+Light\+Estimator}}$<$ POLICY $>$\+::bsdf\+Sample\+Path\+With\+Nee (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classph_1_1_bsdf_sample_query}{Bsdf\+Sample\+Query}} \&}]{bsdf\+Sample}{, }\item[{\mbox{\hyperlink{classph_1_1_sample_flow}{Sample\+Flow}} \&}]{sample\+Flow}{, }\item[{\mbox{\hyperlink{namespaceph_1_1math_ad1ddf3801f5a9ea201227d49747987ed}{math\+::\+Spectrum}} \texorpdfstring{$\ast$}{*}}]{out\+\_\+\+Lo}{ = {\ttfamily nullptr}, }\item[{std\+::optional$<$ \mbox{\hyperlink{classph_1_1_surface_hit}{Surface\+Hit}} $>$ \texorpdfstring{$\ast$}{*}}]{out\+\_\+X}{ = {\ttfamily nullptr}}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [nodiscard]}}



\doxylink{classph_1_1_sample}{Sample} lighting by combining the techniques used by {\ttfamily bsdf\+Sample()} and {\ttfamily nee\+Sample()}. A light sampling technique that is always valid. 


\begin{DoxyParams}{Parameters}
{\em bsdf\+Sample} & BSDF sample result. Validity of its output should be explicitly tested before use. \\
\hline
{\em out\+\_\+\+Lo} & The sampled outgoing energy from {\ttfamily X}. The sample is properly weighted with any required BSDFs and PDFs. \\
\hline
{\em out\+\_\+X} & Returns the surface that is sampled. It is not necessary an energy-\/emitting surface (as {\ttfamily out\+\_\+\+Le} could be 0 if {\ttfamily out\+\_\+X} is requested). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Whether output parameters are usable. If {\ttfamily false} is returned, the sample should still be treated as valid, albeit its contribution is effectively zero. 
\end{DoxyReturn}
\Hypertarget{classph_1_1lta_1_1_t_direct_light_estimator_a6fd335f50bce1a71748affc54b550d0f}\index{ph::lta::TDirectLightEstimator$<$ POLICY $>$@{ph::lta::TDirectLightEstimator$<$ POLICY $>$}!isNeeSamplable@{isNeeSamplable}}
\index{isNeeSamplable@{isNeeSamplable}!ph::lta::TDirectLightEstimator$<$ POLICY $>$@{ph::lta::TDirectLightEstimator$<$ POLICY $>$}}
\doxysubsubsection{\texorpdfstring{isNeeSamplable()}{isNeeSamplable()}}
{\footnotesize\ttfamily \label{classph_1_1lta_1_1_t_direct_light_estimator_a6fd335f50bce1a71748affc54b550d0f} 
template$<$\mbox{\hyperlink{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17d}{ESidedness\+Policy}} POLICY$>$ \\
bool \mbox{\hyperlink{classph_1_1lta_1_1_t_direct_light_estimator}{ph\+::lta\+::\+TDirect\+Light\+Estimator}}$<$ POLICY $>$\+::is\+Nee\+Samplable (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classph_1_1_surface_hit}{Surface\+Hit}} \&}]{X}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [nodiscard]}}

\begin{DoxyReturn}{Returns}
Checks whether next-\/event estimation is a valid technique to use on the surface {\ttfamily X}. 
\end{DoxyReturn}
\Hypertarget{classph_1_1lta_1_1_t_direct_light_estimator_aaf17280d6b32cb7ae5037251523f5eaf}\index{ph::lta::TDirectLightEstimator$<$ POLICY $>$@{ph::lta::TDirectLightEstimator$<$ POLICY $>$}!neeSampleEmission@{neeSampleEmission}}
\index{neeSampleEmission@{neeSampleEmission}!ph::lta::TDirectLightEstimator$<$ POLICY $>$@{ph::lta::TDirectLightEstimator$<$ POLICY $>$}}
\doxysubsubsection{\texorpdfstring{neeSampleEmission()}{neeSampleEmission()}}
{\footnotesize\ttfamily \label{classph_1_1lta_1_1_t_direct_light_estimator_aaf17280d6b32cb7ae5037251523f5eaf} 
template$<$\mbox{\hyperlink{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17d}{ESidedness\+Policy}} POLICY$>$ \\
bool \mbox{\hyperlink{classph_1_1lta_1_1_t_direct_light_estimator}{ph\+::lta\+::\+TDirect\+Light\+Estimator}}$<$ POLICY $>$\+::nee\+Sample\+Emission (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classph_1_1_direct_energy_sample_query}{Direct\+Energy\+Sample\+Query}} \&}]{direct\+Sample}{, }\item[{\mbox{\hyperlink{classph_1_1_sample_flow}{Sample\+Flow}} \&}]{sample\+Flow}{, }\item[{\mbox{\hyperlink{classph_1_1_surface_hit}{Surface\+Hit}} \texorpdfstring{$\ast$}{*}}]{out\+\_\+\+Xe}{ = {\ttfamily nullptr}}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [nodiscard]}}



\doxylink{classph_1_1_sample}{Sample} lighting using next-\/event estimation. This light sampling technique may not always be valid. Calling this method when {\ttfamily \doxylink{classph_1_1lta_1_1_t_direct_light_estimator_a6fd335f50bce1a71748affc54b550d0f}{is\+Nee\+Samplable()}} returns {\ttfamily false} is an error. 


\begin{DoxyParams}{Parameters}
{\em direct\+Sample} & Direct energy sample result. Validity of its output should be explicitly tested before use. \\
\hline
{\em out\+\_\+\+Xe} & Returns the surface that is sampled. It is always an energy-\/emitting surface. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Whether output parameters are usable. If {\ttfamily false} is returned, the sample should still be treated as valid, albeit its contribution is effectively zero. 
\end{DoxyReturn}
\Hypertarget{classph_1_1lta_1_1_t_direct_light_estimator_ae264d6fc1c916e86aa96e788b6d8a9f6}\index{ph::lta::TDirectLightEstimator$<$ POLICY $>$@{ph::lta::TDirectLightEstimator$<$ POLICY $>$}!neeSamplePdfWUnoccluded@{neeSamplePdfWUnoccluded}}
\index{neeSamplePdfWUnoccluded@{neeSamplePdfWUnoccluded}!ph::lta::TDirectLightEstimator$<$ POLICY $>$@{ph::lta::TDirectLightEstimator$<$ POLICY $>$}}
\doxysubsubsection{\texorpdfstring{neeSamplePdfWUnoccluded()}{neeSamplePdfWUnoccluded()}}
{\footnotesize\ttfamily \label{classph_1_1lta_1_1_t_direct_light_estimator_ae264d6fc1c916e86aa96e788b6d8a9f6} 
template$<$\mbox{\hyperlink{namespaceph_1_1lta_a1d33ee239cb49375e222139a0fe1c17d}{ESidedness\+Policy}} POLICY$>$ \\
real \mbox{\hyperlink{classph_1_1lta_1_1_t_direct_light_estimator}{ph\+::lta\+::\+TDirect\+Light\+Estimator}}$<$ POLICY $>$\+::nee\+Sample\+Pdf\+WUnoccluded (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classph_1_1_surface_hit}{Surface\+Hit}} \&}]{X}{, }\item[{const \mbox{\hyperlink{classph_1_1_surface_hit}{Surface\+Hit}} \&}]{Xe}{}\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [nodiscard]}}



Get the solid angle domain \doxylink{classph_1_1lta_1_1_p_d_f}{PDF} of an next-\/event estimation lighting sample. Surface occlusion is not taken into account. Calling this method when {\ttfamily \doxylink{classph_1_1lta_1_1_t_direct_light_estimator_a6fd335f50bce1a71748affc54b550d0f}{is\+Nee\+Samplable()}} returns {\ttfamily false} is an error. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Source/\+Core/\+LTA/\mbox{\hyperlink{_t_direct_light_estimator_8h}{TDirect\+Light\+Estimator.\+h}}\item 
Source/\+Core/\+LTA/\mbox{\hyperlink{_t_direct_light_estimator_8ipp}{TDirect\+Light\+Estimator.\+ipp}}\end{DoxyCompactItemize}
