\doxysection{memory.\+ipp}
\hypertarget{memory_8ipp_source}{}\label{memory_8ipp_source}\index{Source/Common/memory.ipp@{Source/Common/memory.ipp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}Common/memory.h"{}}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <cstdint>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <type\_traits>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <bit>}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceph}{ph}}}
\DoxyCodeLine{00011\ \{}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00014\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ from\_bytes(\textcolor{keyword}{const}\ std::byte*\ \textcolor{keyword}{const}\ srcBytes,\ T*\ \textcolor{keyword}{const}\ out\_dstValue)}
\DoxyCodeLine{00015\ \{}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_trivially\_copyable\_v<T>);}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \ \ \ \ PH\_ASSERT(srcBytes);}
\DoxyCodeLine{00019\ \ \ \ \ PH\_ASSERT(out\_dstValue);}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \ \ \ \ std::copy(}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ srcBytes,}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ srcBytes\ +\ \textcolor{keyword}{sizeof}(T),}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \textcolor{keyword}{reinterpret\_cast<}std::byte*\textcolor{keyword}{>}(out\_dstValue));}
\DoxyCodeLine{00025\ \}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00028\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ to\_bytes(\textcolor{keyword}{const}\ T\&\ srcValue,\ std::byte*\ \textcolor{keyword}{const}\ out\_dstBytes)}
\DoxyCodeLine{00029\ \{}
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keyword}{static\_assert}(std::is\_trivially\_copyable\_v<T>);}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \ \ PH\_ASSERT(out\_dstBytes);}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ std::copy(}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }std::byte*\textcolor{keyword}{>}(\&srcValue),}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const\ }std::byte*\textcolor{keyword}{>}(\&srcValue)\ +\ \textcolor{keyword}{sizeof}(T),}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ out\_dstBytes);}
\DoxyCodeLine{00038\ \}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \textcolor{keyword}{template}<std::\textcolor{keywordtype}{size\_t}\ N>}
\DoxyCodeLine{00041\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ reverse\_bytes(std::byte*\ \textcolor{keyword}{const}\ bytes)}
\DoxyCodeLine{00042\ \{}
\DoxyCodeLine{00043\ \ \ \ \ PH\_ASSERT(bytes);}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(N\ ==\ 1)}
\DoxyCodeLine{00046\ \ \ \ \ \{}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Nothing\ to\ do,\ single\ byte\ is\ already\ its\ own\ reverse}}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{00049\ \ \ \ \ \}}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(N\ ==\ 2)}
\DoxyCodeLine{00051\ \ \ \ \ \{}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ std::uint16\_t\ twoBytes;}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ from\_bytes(bytes,\ \&twoBytes);}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ twoBytes\ =\ std::byteswap(twoBytes);}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ to\_bytes(twoBytes,\ bytes);}
\DoxyCodeLine{00056\ \ \ \ \ \}}
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(N\ ==\ 4)}
\DoxyCodeLine{00058\ \ \ \ \ \{}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ std::uint32\_t\ fourBytes;}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ from\_bytes(bytes,\ \&fourBytes);}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ fourBytes\ =\ std::byteswap(fourBytes);}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ to\_bytes(fourBytes,\ bytes);}
\DoxyCodeLine{00063\ \ \ \ \ \}}
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ \textcolor{keyword}{constexpr}(N\ ==\ 8)}
\DoxyCodeLine{00065\ \ \ \ \ \{}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ std::uint64\_t\ eightBytes;}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ from\_bytes(bytes,\ \&eightBytes);}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ eightBytes\ =\ std::byteswap(eightBytes);}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ to\_bytes(eightBytes,\ bytes);}
\DoxyCodeLine{00070\ \ \ \ \ \}}
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00072\ \ \ \ \ \{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Invalid\ \`{}N`\ (number\ of\ bytes)}}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ (one\ may\ also\ consider\ to\ add\ impl\ for\ \`{}N`)}}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ PH\_ASSERT\_UNREACHABLE\_SECTION();}
\DoxyCodeLine{00076\ \ \ \ \ \}}
\DoxyCodeLine{00077\ \}}
\DoxyCodeLine{00078\ }
\DoxyCodeLine{00079\ \}\textcolor{comment}{//\ end\ namespace\ ph}}

\end{DoxyCode}
