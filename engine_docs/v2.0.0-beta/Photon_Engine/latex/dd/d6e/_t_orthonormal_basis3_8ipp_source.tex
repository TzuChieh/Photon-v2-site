\doxysection{TOrthonormal\+Basis3.\+ipp}
\hypertarget{_t_orthonormal_basis3_8ipp_source}{}\label{_t_orthonormal_basis3_8ipp_source}\index{Source/Math/TOrthonormalBasis3.ipp@{Source/Math/TOrthonormalBasis3.ipp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}Math/TOrthonormalBasis3.h"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{math_8h}{Math/math.h}}"{}}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}Common/assertion.h"{}}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <cmath>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <limits>}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceph_1_1math}{ph::math}}}
\DoxyCodeLine{00012\ \{}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00015\ \textcolor{keyword}{inline}\ TOrthonormalBasis3<T>\ TOrthonormalBasis3<T>::makeFromUnitY(\textcolor{keyword}{const}\ TVector3<T>\&\ unitYAxis)}
\DoxyCodeLine{00016\ \{}
\DoxyCodeLine{00017\ \ \ \ \ PH\_ASSERT\_MSG(unitYAxis.length()\ >\ T(0.9)\ \&\&\ unitYAxis.isFinite(),\ unitYAxis.toString());}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{comment}{//\ choose\ an\ axis\ deviate\ enough\ to\ specified\ y-\/axis\ to\ perform\ cross\ product\ in\ order\ to\ avoid\ some\ }}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{comment}{//\ numeric\ errors}}
\DoxyCodeLine{00021\ \ \ \ \ TVector3<T>\ unitXAxis;}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keywordflow}{if}(std::abs(unitYAxis.y())\ <\ constant::rcp\_sqrt\_2<real>)}
\DoxyCodeLine{00023\ \ \ \ \ \{}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ unitXAxis.set(\{-\/unitYAxis.z(),\ T(0),\ unitYAxis.x()\});\textcolor{comment}{//\ yAxis\ cross\ (0,\ 1,\ 0)}}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ unitXAxis.mulLocal(T(1)\ /\ std::sqrt(unitXAxis.x()\ *\ unitXAxis.x()\ +\ unitXAxis.z()\ *\ unitXAxis.z()));}
\DoxyCodeLine{00026\ \ \ \ \ \}}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00028\ \ \ \ \ \{}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ unitXAxis.set(\{unitYAxis.y(),\ -\/unitYAxis.x(),\ T(0)\});\textcolor{comment}{//\ yAxis\ cross\ (0,\ 0,\ 1)}}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ unitXAxis.mulLocal(T(1)\ /\ std::sqrt(unitXAxis.x()\ *\ unitXAxis.x()\ +\ unitXAxis.y()\ *\ unitXAxis.y()));}
\DoxyCodeLine{00031\ \ \ \ \ \}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keyword}{const}\ TVector3<T>\ unitZAxis\ =\ unitXAxis.cross(unitYAxis);}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ PH\_ASSERT\_MSG(unitXAxis.isFinite()\ \&\&\ unitZAxis.isFinite(),\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}unit-\/x-\/axis\ =\ "{}}\ +\ unitXAxis.toString()\ +\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}unit-\/z-\/axis\ =\ "{}}\ +\ unitZAxis.toString()\ +\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}});}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordflow}{return}\ TOrthonormalBasis3(unitXAxis,\ unitYAxis,\ unitZAxis);}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \textcolor{comment}{//\ TEST}}
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{comment}{/*std::cerr\ <<\ std::setprecision(20);}}
\DoxyCodeLine{00043\ \textcolor{comment}{\ \ \ \ if(std::abs(out\_unitXaxis-\/>length()\ -\/\ 1.0\_r)\ >\ 0.000001\_r)}}
\DoxyCodeLine{00044\ \textcolor{comment}{\ \ \ \ \ \ \ \ std::cerr\ <<\ out\_unitXaxis-\/>length()\ <<\ std::endl;}}
\DoxyCodeLine{00045\ \textcolor{comment}{\ \ \ \ if(std::abs(out\_unitZaxis-\/>length()\ -\/\ 1.0\_r)\ >\ 0.000001\_r)}}
\DoxyCodeLine{00046\ \textcolor{comment}{\ \ \ \ \ \ \ \ std::cerr\ <<\ out\_unitZaxis-\/>length()\ <<\ std::endl;}}
\DoxyCodeLine{00047\ \textcolor{comment}{\ \ \ \ if(out\_unitXaxis-\/>dot(*out\_unitZaxis)\ >\ 0.000001\_r)}}
\DoxyCodeLine{00048\ \textcolor{comment}{\ \ \ \ \ \ \ \ std::cerr\ <<\ out\_unitXaxis-\/>dot(*out\_unitZaxis)\ <<\ std::endl;}}
\DoxyCodeLine{00049\ \textcolor{comment}{\ \ \ \ if(out\_unitZaxis-\/>dot(unitYaxis)\ >\ 0.000001\_r)}}
\DoxyCodeLine{00050\ \textcolor{comment}{\ \ \ \ \ \ \ \ std::cerr\ <<\ out\_unitZaxis-\/>dot(unitYaxis)\ <<\ std::endl;}}
\DoxyCodeLine{00051\ \textcolor{comment}{\ \ \ \ if(unitYaxis.dot(*out\_unitXaxis)\ >\ 0.000001\_r)}}
\DoxyCodeLine{00052\ \textcolor{comment}{\ \ \ \ \ \ \ \ std::cerr\ <<\ unitYaxis.dot(*out\_unitXaxis)\ <<\ std::endl;*/}}
\DoxyCodeLine{00053\ \}}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00055\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00056\ \textcolor{keyword}{inline}\ TOrthonormalBasis3<T>::TOrthonormalBasis3()\ :}
\DoxyCodeLine{00057\ \ \ \ \ m\_xAxis(1,\ 0,\ 0),}
\DoxyCodeLine{00058\ \ \ \ \ m\_yAxis(0,\ 1,\ 0),}
\DoxyCodeLine{00059\ \ \ \ \ m\_zAxis(0,\ 0,\ 1)}
\DoxyCodeLine{00060\ \{\}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00063\ \textcolor{keyword}{inline}\ TOrthonormalBasis3<T>::TOrthonormalBasis3(\textcolor{keyword}{const}\ TOrthonormalBasis3\&\ other)\ :}
\DoxyCodeLine{00064\ \ \ \ \ TOrthonormalBasis3(other.m\_xAxis,\ other.m\_yAxis,\ other.m\_zAxis)}
\DoxyCodeLine{00065\ \{\}}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00068\ \textcolor{keyword}{inline}\ TOrthonormalBasis3<T>::TOrthonormalBasis3(}
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keyword}{const}\ TVector3<T>\&\ xAxis,}
\DoxyCodeLine{00070\ \ \ \ \ \textcolor{keyword}{const}\ TVector3<T>\&\ yAxis,\ }
\DoxyCodeLine{00071\ \ \ \ \ \textcolor{keyword}{const}\ TVector3<T>\&\ zAxis)\ :\ }
\DoxyCodeLine{00072\ \ \ \ \ m\_xAxis(xAxis),}
\DoxyCodeLine{00073\ \ \ \ \ m\_yAxis(yAxis),}
\DoxyCodeLine{00074\ \ \ \ \ m\_zAxis(zAxis)}
\DoxyCodeLine{00075\ \{\}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00078\ \textcolor{keyword}{inline}\ TVector3<T>\ TOrthonormalBasis3<T>::worldToLocal(\textcolor{keyword}{const}\ TVector3<T>\&\ worldVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00079\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordflow}{return}\ TVector3<T>(m\_xAxis.dot(worldVec),}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_yAxis.dot(worldVec),\ }
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_zAxis.dot(worldVec));}
\DoxyCodeLine{00083\ \}}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00086\ \textcolor{keyword}{inline}\ TVector3<T>\ TOrthonormalBasis3<T>::localToWorld(\textcolor{keyword}{const}\ TVector3<T>\&\ localVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00087\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_xAxis.mul(localVec.x()).add(}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ m\_yAxis.mul(localVec.y())).add(}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ m\_zAxis.mul(localVec.z()));}
\DoxyCodeLine{00091\ \}}
\DoxyCodeLine{00092\ }
\DoxyCodeLine{00093\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00094\ \textcolor{keyword}{inline}\ T\ TOrthonormalBasis3<T>::cosPhi(\textcolor{keyword}{const}\ TVector3<T>\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00095\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keyword}{const}\ T\ zProjection\ =\ unitVec.dot(m\_zAxis);}
\DoxyCodeLine{00097\ \ \ \ \ \textcolor{keyword}{const}\ T\ rProjection\ =\ sinTheta(unitVec);}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \ \ \ \ \textcolor{keywordflow}{if}(rProjection\ !=\ T(0))}
\DoxyCodeLine{00100\ \ \ \ \ \{}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ math::clamp(zProjection\ /\ rProjection,\ T(-\/1),\ T(1));}
\DoxyCodeLine{00102\ \ \ \ \ \}}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00104\ \ \ \ \ \{}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ corresponds\ to\ phi\ =\ 0}}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ T(1);}
\DoxyCodeLine{00107\ \ \ \ \ \}}
\DoxyCodeLine{00108\ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00111\ \textcolor{keyword}{inline}\ T\ TOrthonormalBasis3<T>::sinPhi(\textcolor{keyword}{const}\ TVector3<T>\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00112\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00113\ \ \ \ \ \textcolor{keyword}{const}\ T\ xProjection\ =\ unitVec.dot(m\_xAxis);}
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{keyword}{const}\ T\ rProjection\ =\ sinTheta(unitVec);}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keywordflow}{if}(rProjection\ !=\ T(0))}
\DoxyCodeLine{00117\ \ \ \ \ \{}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ math::clamp(xProjection\ /\ rProjection,\ T(-\/1),\ T(1));}
\DoxyCodeLine{00119\ \ \ \ \ \}}
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00121\ \ \ \ \ \{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ corresponds\ to\ phi\ =\ 0}}
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ T(0);}
\DoxyCodeLine{00124\ \ \ \ \ \}}
\DoxyCodeLine{00125\ \}}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00128\ \textcolor{keyword}{inline}\ T\ TOrthonormalBasis3<T>::tanPhi(\textcolor{keyword}{const}\ TVector3<T>\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00129\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00130\ \ \ \ \ \textcolor{keyword}{const}\ T\ zProjection\ =\ unitVec.dot(m\_zAxis);}
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keyword}{const}\ T\ xProjection\ =\ unitVec.dot(m\_xAxis);}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordflow}{if}(zProjection\ !=\ T(0))}
\DoxyCodeLine{00134\ \ \ \ \ \{}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ math::clamp(}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ xProjection\ /\ zProjection,}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<T>::lowest(),}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<T>::max());}
\DoxyCodeLine{00139\ \ \ \ \ \}}
\DoxyCodeLine{00140\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00141\ \ \ \ \ \{}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}(math::sign(xProjection))}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ -\/1:\ \textcolor{keywordflow}{return}\ std::numeric\_limits<T>::lowest();}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 0:\ \textcolor{keywordflow}{return}\ T(0);}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 1:\ \textcolor{keywordflow}{return}\ std::numeric\_limits<T>::max();}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ PH\_ASSERT\_UNREACHABLE\_SECTION();}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ T(0);}
\DoxyCodeLine{00151\ \ \ \ \ \}}
\DoxyCodeLine{00152\ \}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00155\ \textcolor{keyword}{inline}\ T\ TOrthonormalBasis3<T>::cos2Phi(\textcolor{keyword}{const}\ TVector3<T>\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00156\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00157\ \ \ \ \ \textcolor{keywordflow}{return}\ math::squared(cosPhi(unitVec));}
\DoxyCodeLine{00158\ \}}
\DoxyCodeLine{00159\ }
\DoxyCodeLine{00160\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00161\ \textcolor{keyword}{inline}\ T\ TOrthonormalBasis3<T>::sin2Phi(\textcolor{keyword}{const}\ TVector3<T>\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00162\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00163\ \ \ \ \ \textcolor{keywordflow}{return}\ math::squared(sinPhi(unitVec));}
\DoxyCodeLine{00164\ \}}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00167\ \textcolor{keyword}{inline}\ T\ TOrthonormalBasis3<T>::tan2Phi(\textcolor{keyword}{const}\ TVector3<T>\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00168\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keyword}{const}\ T\ cos2P\ =\ cos2Phi(unitVec);}
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{keyword}{const}\ T\ sin2P\ =\ 1\ -\/\ cos2P;}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \ \ \textcolor{keywordflow}{if}(cos2P\ !=\ T(0))}
\DoxyCodeLine{00173\ \ \ \ \ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ math::clamp(}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ sin2P\ /\ cos2P,}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<T>::lowest(),}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<T>::max());}
\DoxyCodeLine{00178\ \ \ \ \ \}}
\DoxyCodeLine{00179\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00180\ \ \ \ \ \{}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::numeric\_limits<T>::max();}
\DoxyCodeLine{00182\ \ \ \ \ \}}
\DoxyCodeLine{00183\ \}}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00186\ \textcolor{keyword}{inline}\ T\ TOrthonormalBasis3<T>::cosTheta(\textcolor{keyword}{const}\ TVector3<T>\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00187\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00188\ \ \ \ \ \textcolor{keywordflow}{return}\ math::clamp(m\_yAxis.dot(unitVec),\ T(-\/1),\ T(1));}
\DoxyCodeLine{00189\ \}}
\DoxyCodeLine{00190\ }
\DoxyCodeLine{00191\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00192\ \textcolor{keyword}{inline}\ T\ TOrthonormalBasis3<T>::sinTheta(\textcolor{keyword}{const}\ TVector3<T>\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00193\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00194\ \ \ \ \ \textcolor{keywordflow}{return}\ std::sqrt(sin2Theta(unitVec));}
\DoxyCodeLine{00195\ \}}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00198\ \textcolor{keyword}{inline}\ T\ TOrthonormalBasis3<T>::tanTheta(\textcolor{keyword}{const}\ TVector3<T>\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00199\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keyword}{const}\ T\ cosT\ =\ cosTheta(unitVec);}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keywordflow}{if}(cosT\ !=\ T(0))}
\DoxyCodeLine{00203\ \ \ \ \ \{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ math::clamp(}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ sinTheta(unitVec)\ /\ cosT,}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<T>::lowest(),}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<T>::max());}
\DoxyCodeLine{00208\ \ \ \ \ \}}
\DoxyCodeLine{00209\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00210\ \ \ \ \ \{}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}(math::sign(sinTheta(unitVec)))}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ -\/1:\ \textcolor{keywordflow}{return}\ std::numeric\_limits<T>::lowest();}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 0:\ \textcolor{keywordflow}{return}\ T(0);}
\DoxyCodeLine{00215\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \ 1:\ \textcolor{keywordflow}{return}\ std::numeric\_limits<T>::max();}
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ PH\_ASSERT\_UNREACHABLE\_SECTION();}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ T(0);}
\DoxyCodeLine{00220\ \ \ \ \ \}}
\DoxyCodeLine{00221\ \}}
\DoxyCodeLine{00222\ }
\DoxyCodeLine{00223\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00224\ \textcolor{keyword}{inline}\ T\ TOrthonormalBasis3<T>::absCosTheta(\textcolor{keyword}{const}\ TVector3<T>\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00225\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00226\ \ \ \ \ \textcolor{keywordflow}{return}\ std::abs(cosTheta(unitVec));}
\DoxyCodeLine{00227\ \}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00230\ \textcolor{keyword}{inline}\ T\ TOrthonormalBasis3<T>::absSinTheta(\textcolor{keyword}{const}\ TVector3<T>\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00231\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00232\ \ \ \ \ \textcolor{keywordflow}{return}\ std::abs(sinTheta(unitVec));}
\DoxyCodeLine{00233\ \}}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00236\ \textcolor{keyword}{inline}\ T\ TOrthonormalBasis3<T>::cos2Theta(\textcolor{keyword}{const}\ TVector3<T>\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00237\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00238\ \ \ \ \ \textcolor{keywordflow}{return}\ math::squared(cosTheta(unitVec));}
\DoxyCodeLine{00239\ \}}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00242\ \textcolor{keyword}{inline}\ T\ TOrthonormalBasis3<T>::sin2Theta(\textcolor{keyword}{const}\ TVector3<T>\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00243\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00244\ \ \ \ \ \textcolor{keywordflow}{return}\ 1\ -\/\ cos2Theta(unitVec);}
\DoxyCodeLine{00245\ \}}
\DoxyCodeLine{00246\ }
\DoxyCodeLine{00247\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00248\ \textcolor{keyword}{inline}\ T\ TOrthonormalBasis3<T>::tan2Theta(\textcolor{keyword}{const}\ TVector3<T>\&\ unitVec)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00249\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00250\ \ \ \ \ \textcolor{keyword}{const}\ T\ cos2T\ =\ cos2Theta(unitVec);}
\DoxyCodeLine{00251\ \ \ \ \ \textcolor{keyword}{const}\ T\ sin2T\ =\ 1\ -\/\ cos2T;}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ \ \ \ \ \textcolor{keywordflow}{if}(cos2T\ !=\ T(0))}
\DoxyCodeLine{00254\ \ \ \ \ \{}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ math::clamp(}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \ \ \ \ sin2T\ /\ cos2T,}
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<T>::lowest(),}
\DoxyCodeLine{00258\ \ \ \ \ \ \ \ \ \ \ \ \ std::numeric\_limits<T>::max());}
\DoxyCodeLine{00259\ \ \ \ \ \}}
\DoxyCodeLine{00260\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00261\ \ \ \ \ \{}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::numeric\_limits<T>::max();}
\DoxyCodeLine{00263\ \ \ \ \ \}}
\DoxyCodeLine{00264\ \}}
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00266\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00267\ \textcolor{keyword}{inline}\ TOrthonormalBasis3<T>\&\ TOrthonormalBasis3<T>::renormalize()}
\DoxyCodeLine{00268\ \{}
\DoxyCodeLine{00269\ \ \ \ \ m\_xAxis.normalizeLocal();}
\DoxyCodeLine{00270\ \ \ \ \ m\_yAxis.normalizeLocal();}
\DoxyCodeLine{00271\ \ \ \ \ m\_zAxis.normalizeLocal();}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00273\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00274\ \}}
\DoxyCodeLine{00275\ }
\DoxyCodeLine{00276\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00277\ \textcolor{keyword}{inline}\ TOrthonormalBasis3<T>\&\ TOrthonormalBasis3<T>::renormalizeXAxis()}
\DoxyCodeLine{00278\ \{}
\DoxyCodeLine{00279\ \ \ \ \ m\_xAxis.normalizeLocal();}
\DoxyCodeLine{00280\ }
\DoxyCodeLine{00281\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00282\ \}}
\DoxyCodeLine{00283\ }
\DoxyCodeLine{00284\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00285\ \textcolor{keyword}{inline}\ TOrthonormalBasis3<T>\&\ TOrthonormalBasis3<T>::renormalizeYAxis()}
\DoxyCodeLine{00286\ \{}
\DoxyCodeLine{00287\ \ \ \ \ m\_yAxis.normalizeLocal();}
\DoxyCodeLine{00288\ }
\DoxyCodeLine{00289\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00290\ \}}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00293\ \textcolor{keyword}{inline}\ TOrthonormalBasis3<T>\&\ TOrthonormalBasis3<T>::renormalizeZAxis()}
\DoxyCodeLine{00294\ \{}
\DoxyCodeLine{00295\ \ \ \ \ m\_zAxis.normalizeLocal();}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00298\ \}}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00301\ \textcolor{keyword}{inline}\ TOrthonormalBasis3<T>\&\ TOrthonormalBasis3<T>::setXAxis(\textcolor{keyword}{const}\ TVector3<T>\&\ axis)}
\DoxyCodeLine{00302\ \{}
\DoxyCodeLine{00303\ \ \ \ \ m\_xAxis\ =\ axis;}
\DoxyCodeLine{00304\ }
\DoxyCodeLine{00305\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00306\ \}}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00309\ \textcolor{keyword}{inline}\ TOrthonormalBasis3<T>\&\ TOrthonormalBasis3<T>::setYAxis(\textcolor{keyword}{const}\ TVector3<T>\&\ axis)}
\DoxyCodeLine{00310\ \{}
\DoxyCodeLine{00311\ \ \ \ \ m\_yAxis\ =\ axis;}
\DoxyCodeLine{00312\ }
\DoxyCodeLine{00313\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00314\ \}}
\DoxyCodeLine{00315\ }
\DoxyCodeLine{00316\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00317\ \textcolor{keyword}{inline}\ TOrthonormalBasis3<T>\&\ TOrthonormalBasis3<T>::setZAxis(\textcolor{keyword}{const}\ TVector3<T>\&\ axis)}
\DoxyCodeLine{00318\ \{}
\DoxyCodeLine{00319\ \ \ \ \ m\_zAxis\ =\ axis;}
\DoxyCodeLine{00320\ }
\DoxyCodeLine{00321\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00322\ \}}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00325\ \textcolor{keyword}{inline}\ TOrthonormalBasis3<T>\&\ TOrthonormalBasis3<T>::set(}
\DoxyCodeLine{00326\ \ \ \ \ \textcolor{keyword}{const}\ TVector3<T>\&\ xAxis,}
\DoxyCodeLine{00327\ \ \ \ \ \textcolor{keyword}{const}\ TVector3<T>\&\ yAxis,}
\DoxyCodeLine{00328\ \ \ \ \ \textcolor{keyword}{const}\ TVector3<T>\&\ zAxis)}
\DoxyCodeLine{00329\ \{}
\DoxyCodeLine{00330\ \ \ \ \ m\_xAxis\ =\ xAxis;}
\DoxyCodeLine{00331\ \ \ \ \ m\_yAxis\ =\ yAxis;}
\DoxyCodeLine{00332\ \ \ \ \ m\_zAxis\ =\ zAxis;}
\DoxyCodeLine{00333\ }
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00335\ \}}
\DoxyCodeLine{00336\ }
\DoxyCodeLine{00337\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00338\ \textcolor{keyword}{inline}\ TVector3<T>\ TOrthonormalBasis3<T>::getXAxis()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00339\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00340\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_xAxis;}
\DoxyCodeLine{00341\ \}}
\DoxyCodeLine{00342\ }
\DoxyCodeLine{00343\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00344\ \textcolor{keyword}{inline}\ TVector3<T>\ TOrthonormalBasis3<T>::getYAxis()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00345\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00346\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_yAxis;}
\DoxyCodeLine{00347\ \}}
\DoxyCodeLine{00348\ }
\DoxyCodeLine{00349\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00350\ \textcolor{keyword}{inline}\ TVector3<T>\ TOrthonormalBasis3<T>::getZAxis()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00351\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00352\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_zAxis;}
\DoxyCodeLine{00353\ \}}
\DoxyCodeLine{00354\ }
\DoxyCodeLine{00355\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00356\ \textcolor{keyword}{inline}\ TOrthonormalBasis3<T>\&\ TOrthonormalBasis3<T>::operator\ =\ (\textcolor{keyword}{const}\ TOrthonormalBasis3\&\ rhs)}
\DoxyCodeLine{00357\ \{}
\DoxyCodeLine{00358\ \ \ \ \ set(rhs.m\_xAxis,\ rhs.m\_yAxis,\ rhs.m\_zAxis);}
\DoxyCodeLine{00359\ }
\DoxyCodeLine{00360\ \ \ \ \ \textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};}
\DoxyCodeLine{00361\ \}}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00363\ \}\textcolor{comment}{//\ end\ namespace\ ph::math}}

\end{DoxyCode}
