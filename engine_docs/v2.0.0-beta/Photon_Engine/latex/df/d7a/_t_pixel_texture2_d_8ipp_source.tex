\doxysection{TPixel\+Texture2\+D.\+ipp}
\hypertarget{_t_pixel_texture2_d_8ipp_source}{}\label{_t_pixel_texture2_d_8ipp_source}\index{Source/Core/Texture/Pixel/TPixelTexture2D.ipp@{Source/Core/Texture/Pixel/TPixelTexture2D.ipp}}
\mbox{\hyperlink{_t_pixel_texture2_d_8ipp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_t_pixel_texture2_d_8h}{Core/Texture/Pixel/TPixelTexture2D.h}}"{}}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_t_arithmetic_array_8h}{Math/TArithmeticArray.h}}"{}}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <Common/assertion.h>}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <stdexcept>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <cmath>}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceph}{ph}}}
\DoxyCodeLine{00012\ \{}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OutputType>}
\DoxyCodeLine{00015\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1_t_pixel_texture2_d_a5604cefa5e2ddefcfef9f6881d854e9e}{TPixelTexture2D<OutputType>::TPixelTexture2D}}(\textcolor{keyword}{const}\ std::shared\_ptr<PixelBuffer2D>\&\ pixelBuffer)\ :}
\DoxyCodeLine{00016\ \ \ \ \ \mbox{\hyperlink{classph_1_1_t_pixel_texture2_d}{TPixelTexture2D}}(}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ pixelBuffer,}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ pixel\_texture::ESampleMode::\mbox{\hyperlink{namespaceph_a2f48403e7b58cd9fad4d93f919335cdaaaf17c98bbd83c27d6426d2ff3fa81d7f}{Bilinear}},}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ pixel\_texture::EWrapMode::\mbox{\hyperlink{namespaceph_af0c6de5f0cbfd30ac84f7b0af8529b55a74556551231333c36debc3d373261134}{ClampToEdge}})}
\DoxyCodeLine{00020\ \{\}}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OutputType>}
\DoxyCodeLine{00023\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1_t_pixel_texture2_d_a5604cefa5e2ddefcfef9f6881d854e9e}{TPixelTexture2D<OutputType>::TPixelTexture2D}}(}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keyword}{const}\ std::shared\_ptr<PixelBuffer2D>\&\ pixelBuffer,}
\DoxyCodeLine{00025\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceph_1_1pixel__texture_ae750f043249b1210d6def67f5fc73c85}{pixel\_texture::ESampleMode}}\ \ \ \ \ \ sampleMode,}
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceph_1_1pixel__texture_a5dcb3306aae58b27f6458054da3413c2}{pixel\_texture::EWrapMode}}\ \ \ \ \ \ \ \ wrapModeS,}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{namespaceph_1_1pixel__texture_a5dcb3306aae58b27f6458054da3413c2}{pixel\_texture::EWrapMode}}\ \ \ \ \ \ \ \ wrapModeT)\ :}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ \mbox{\hyperlink{classph_1_1_t_texture}{TTexture}}<OutputType>(),}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \ \ \ \ m\_pixelBuffer(pixelBuffer),}
\DoxyCodeLine{00032\ \ \ \ \ m\_sampleMode\ (sampleMode),}
\DoxyCodeLine{00033\ \ \ \ \ m\_wrapModeS\ \ (wrapModeS),}
\DoxyCodeLine{00034\ \ \ \ \ m\_wrapModeT\ \ (wrapModeT),}
\DoxyCodeLine{00035\ \ \ \ \ m\_texelSize\ \ (0)}
\DoxyCodeLine{00036\ \{}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keywordflow}{if}(!m\_pixelBuffer)}
\DoxyCodeLine{00038\ \ \ \ \ \{}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{throw}\ std::invalid\_argument(}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}Input\ pixel\ buffer\ is\ empty."{}});}
\DoxyCodeLine{00041\ \ \ \ \ \}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ m\_texelSize\ =\ \mbox{\hyperlink{namespaceph_1_1math_a5dfce302e9808008ffbce4236fa1d4f0}{math::Vector2D}}(1.0)\ /\ \mbox{\hyperlink{namespaceph_1_1math_a5dfce302e9808008ffbce4236fa1d4f0}{math::Vector2D}}(m\_pixelBuffer-\/>getSize());}
\DoxyCodeLine{00044\ \}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OutputType>}
\DoxyCodeLine{00047\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector2}{math::TVector2<uint32>}}\ \mbox{\hyperlink{classph_1_1_t_pixel_texture2_d_aa4309321480d89f422a688de2e8d9eb1}{TPixelTexture2D<OutputType>::getSizePx}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00048\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00049\ \ \ \ \ PH\_ASSERT(m\_pixelBuffer);}
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_pixelBuffer-\/>getSize();}
\DoxyCodeLine{00051\ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OutputType>}
\DoxyCodeLine{00054\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector2}{math::Vector2D}}\ \mbox{\hyperlink{classph_1_1_t_pixel_texture2_d_ae2e4f5340d81c77905fc3b61f99257f3}{TPixelTexture2D<OutputType>::getTexelSize}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00055\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_texelSize;}
\DoxyCodeLine{00057\ \}}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OutputType>}
\DoxyCodeLine{00060\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespaceph_1_1pixel__texture_ae750f043249b1210d6def67f5fc73c85}{pixel\_texture::ESampleMode}}\ \mbox{\hyperlink{classph_1_1_t_pixel_texture2_d_a5521a01b114b54707ae30753a45e9cb3}{TPixelTexture2D<OutputType>::getSampleMode}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00061\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_sampleMode;}
\DoxyCodeLine{00063\ \}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OutputType>}
\DoxyCodeLine{00066\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespaceph_1_1pixel__texture_a5dcb3306aae58b27f6458054da3413c2}{pixel\_texture::EWrapMode}}\ \mbox{\hyperlink{classph_1_1_t_pixel_texture2_d_a60bd80fb7aaad4485e81c5bf64301dd8}{TPixelTexture2D<OutputType>::getWrapModeS}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00067\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_wrapModeS;}
\DoxyCodeLine{00069\ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OutputType>}
\DoxyCodeLine{00072\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespaceph_1_1pixel__texture_a5dcb3306aae58b27f6458054da3413c2}{pixel\_texture::EWrapMode}}\ \mbox{\hyperlink{classph_1_1_t_pixel_texture2_d_a0e804b49fa535d6c60f60e26c62f0355}{TPixelTexture2D<OutputType>::getWrapModeT}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00073\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_wrapModeT;}
\DoxyCodeLine{00075\ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OutputType>}
\DoxyCodeLine{00078\ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1_pixel_buffer2_d}{PixelBuffer2D}}*\ \mbox{\hyperlink{classph_1_1_t_pixel_texture2_d_a0fd9d040f76a4119ce20d29b32b9b0c8}{TPixelTexture2D<OutputType>::getPixelBuffer}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{00079\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00080\ \ \ \ \ PH\_ASSERT(m\_pixelBuffer);}
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordflow}{return}\ m\_pixelBuffer.get();}
\DoxyCodeLine{00082\ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OutputType>}
\DoxyCodeLine{00085\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector2}{math::Vector2D}}\ \mbox{\hyperlink{classph_1_1_t_pixel_texture2_d_a573f3ef606e6554b30777ee54b016bb0}{TPixelTexture2D<OutputType>::sampleUVToST}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector2}{math::Vector2D}}\&\ sampleUV)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00086\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00087\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespaceph_1_1pixel__texture_a49433cbc4ff5f1c8c5fd65512942718f}{pixel\_texture::uv\_to\_st}}(sampleUV,\ getWrapModeS(),\ getWrapModeT());}
\DoxyCodeLine{00088\ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OutputType>}
\DoxyCodeLine{00091\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1pixel__buffer_1_1_t_pixel}{pixel\_buffer::TPixel<float64>}}\ \mbox{\hyperlink{classph_1_1_t_pixel_texture2_d_a0ec913c3244401c45bd5fd089974003f}{TPixelTexture2D<OutputType>::samplePixelBuffer}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector2}{math::Vector2D}}\&\ sampleUV)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00092\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00093\ \ \ \ \ \textcolor{keywordflow}{switch}(getSampleMode())}
\DoxyCodeLine{00094\ \ \ \ \ \{}
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespaceph_1_1pixel__texture_ae750f043249b1210d6def67f5fc73c85a60494f02d440f316319dd0fad40ad007}{pixel\_texture::ESampleMode::Nearest}}:}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ samplePixelBufferNearest(sampleUV);}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespaceph_1_1pixel__texture_ae750f043249b1210d6def67f5fc73c85aaf17c98bbd83c27d6426d2ff3fa81d7f}{pixel\_texture::ESampleMode::Bilinear}}:}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ samplePixelBufferBilinear(sampleUV);}
\DoxyCodeLine{00100\ \ \ \ \ \}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \ \ PH\_ASSERT\_UNREACHABLE\_SECTION();}
\DoxyCodeLine{00103\ \ \ \ \ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00104\ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OutputType>}
\DoxyCodeLine{00107\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1pixel__buffer_1_1_t_pixel}{pixel\_buffer::TPixel<float64>}}\ \mbox{\hyperlink{classph_1_1_t_pixel_texture2_d_a0e05bebf75a9c5b7d5deec9720c7cd31}{TPixelTexture2D<OutputType>::samplePixelBufferNearest}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector2}{math::Vector2D}}\&\ sampleUV)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00108\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector2}{math::TVector2<uint32>}}\ bufferSize\ =\ getSizePx();}
\DoxyCodeLine{00110\ \ \ \ \ PH\_ASSERT\_GT(bufferSize.\mbox{\hyperlink{classph_1_1math_1_1_t_vector_n_base_a5017418f0b8b2fd8b14dc9ec97dc8c5b}{product}}(),\ 0);}
\DoxyCodeLine{00111\ }
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector2}{math::Vector2D}}\ st\ =\ sampleUVToST(sampleUV);}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00114\ \ \ \ \ \textcolor{comment}{//\ Calculate\ pixel\ buffer\ index\ and\ handle\ potential\ overflow}}
\DoxyCodeLine{00115\ \ \ \ \ uint32\ x\ =\ \textcolor{keyword}{static\_cast<}uint32\textcolor{keyword}{>}(st[0]\ *\ bufferSize.\mbox{\hyperlink{classph_1_1math_1_1_t_vector2_a03c5e56839820da78b52d2db0281f065}{x}}());}
\DoxyCodeLine{00116\ \ \ \ \ uint32\ y\ =\ \textcolor{keyword}{static\_cast<}uint32\textcolor{keyword}{>}(st[1]\ *\ bufferSize.\mbox{\hyperlink{classph_1_1math_1_1_t_vector2_af3065a5fa872cdb3f2291a84824d5d59}{y}}());}
\DoxyCodeLine{00117\ \ \ \ \ x\ =\ x\ <\ bufferSize.\mbox{\hyperlink{classph_1_1math_1_1_t_vector2_a03c5e56839820da78b52d2db0281f065}{x}}()\ ?\ x\ :\ bufferSize.\mbox{\hyperlink{classph_1_1math_1_1_t_vector2_a03c5e56839820da78b52d2db0281f065}{x}}()\ -\/\ 1;}
\DoxyCodeLine{00118\ \ \ \ \ y\ =\ y\ <\ bufferSize.\mbox{\hyperlink{classph_1_1math_1_1_t_vector2_af3065a5fa872cdb3f2291a84824d5d59}{y}}()\ ?\ y\ :\ bufferSize.\mbox{\hyperlink{classph_1_1math_1_1_t_vector2_af3065a5fa872cdb3f2291a84824d5d59}{y}}()\ -\/\ 1;}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordflow}{return}\ getPixelBuffer()-\/>fetchPixel(\{x,\ y\},\ 0);}
\DoxyCodeLine{00121\ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ OutputType>}
\DoxyCodeLine{00124\ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classph_1_1pixel__buffer_1_1_t_pixel}{pixel\_buffer::TPixel<float64>}}\ \mbox{\hyperlink{classph_1_1_t_pixel_texture2_d_a9c87b292e3993e7b86d1dba9b1f2f5c9}{TPixelTexture2D<OutputType>::samplePixelBufferBilinear}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector2}{math::Vector2D}}\&\ sampleUV)\textcolor{keyword}{\ const}}
\DoxyCodeLine{00125\ \textcolor{keyword}{}\{}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector2}{math::TVector2<uint32>}}\ bufferSize\ =\ getSizePx();}
\DoxyCodeLine{00127\ \ \ \ \ PH\_ASSERT\_GT(bufferSize.\mbox{\hyperlink{classph_1_1math_1_1_t_vector_n_base_a5017418f0b8b2fd8b14dc9ec97dc8c5b}{product}}(),\ 0);}
\DoxyCodeLine{00128\ }
\DoxyCodeLine{00129\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector2}{math::Vector2D}}\ st\ =\ sampleUVToST(sampleUV);}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \ \ \textcolor{keyword}{const}\ float64\ x\ \ =\ st[0]\ *\ bufferSize.\mbox{\hyperlink{classph_1_1math_1_1_t_vector2_a03c5e56839820da78b52d2db0281f065}{x}}();}
\DoxyCodeLine{00132\ \ \ \ \ \textcolor{keyword}{const}\ float64\ y\ \ =\ st[1]\ *\ bufferSize.\mbox{\hyperlink{classph_1_1math_1_1_t_vector2_af3065a5fa872cdb3f2291a84824d5d59}{y}}();}
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keyword}{const}\ float64\ x0\ =\ std::floor(x\ -\/\ 0.5)\ +\ 0.5;}
\DoxyCodeLine{00134\ \ \ \ \ \textcolor{keyword}{const}\ float64\ y0\ =\ std::floor(y\ -\/\ 0.5)\ +\ 0.5;}
\DoxyCodeLine{00135\ \ \ \ \ \textcolor{keyword}{const}\ float64\ x1\ =\ x0\ +\ 1.0;}
\DoxyCodeLine{00136\ \ \ \ \ \textcolor{keyword}{const}\ float64\ y1\ =\ y0\ +\ 1.0;}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keyword}{const}\ float64\ weights[4]}
\DoxyCodeLine{00139\ \ \ \ \ \{}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ (x1\ -\/\ x)\ *\ (y1\ -\/\ y),\textcolor{comment}{//\ weight\ 00}}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ (x1\ -\/\ x)\ *\ (y\ -\/\ y0),\textcolor{comment}{//\ weight\ 01}}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ (x\ -\/\ x0)\ *\ (y1\ -\/\ y),\textcolor{comment}{//\ weight\ 10}}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ (x\ -\/\ x0)\ *\ (y\ -\/\ y0)\ \textcolor{comment}{//\ weight\ 11}}
\DoxyCodeLine{00144\ \ \ \ \ \};}
\DoxyCodeLine{00145\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector2}{math::Vector2D}}\ xys[4]}
\DoxyCodeLine{00146\ \ \ \ \ \{}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \{x0,\ y0\},\ \{x0,\ y1\},\ \{x1,\ y0\},\ \{x1,\ y1\}}
\DoxyCodeLine{00148\ \ \ \ \ \};}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \ \ \textcolor{keyword}{using\ }ComputePixel\ =\ \mbox{\hyperlink{classph_1_1math_1_1_t_arithmetic_array}{math::TArithmeticArray<float64,\ pixel\_buffer::MAX\_PIXEL\_ELEMENTS>}};}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \ \ \textcolor{comment}{//\ Calculate\ bilinearly\ interpolated\ pixel\ by\ accumulating\ weighted\ samples}}
\DoxyCodeLine{00153\ \ \ \ \ ComputePixel\ accuPixel(0);}
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{keywordflow}{for}(std::size\_t\ i\ =\ 0;\ i\ <\ 4;\ ++i)}
\DoxyCodeLine{00155\ \ \ \ \ \{}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ST\ coordinates\ for\ the\ i-\/th\ vertex\ of\ the\ bilinear\ quad}}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector2}{math::Vector2D}}\ st\_i\ =\ sampleUVToST(xys[i]\ *\ getTexelSize());}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ uint32\ xi\ =\ \textcolor{keyword}{static\_cast<}uint32\textcolor{keyword}{>}(st\_i[0]\ *\ bufferSize.\mbox{\hyperlink{classph_1_1math_1_1_t_vector2_a03c5e56839820da78b52d2db0281f065}{x}}());}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ uint32\ yi\ =\ \textcolor{keyword}{static\_cast<}uint32\textcolor{keyword}{>}(st\_i[1]\ *\ bufferSize.\mbox{\hyperlink{classph_1_1math_1_1_t_vector2_af3065a5fa872cdb3f2291a84824d5d59}{y}}());}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ xi\ =\ xi\ <\ bufferSize.\mbox{\hyperlink{classph_1_1math_1_1_t_vector2_a03c5e56839820da78b52d2db0281f065}{x}}()\ ?\ xi\ :\ bufferSize.\mbox{\hyperlink{classph_1_1math_1_1_t_vector2_a03c5e56839820da78b52d2db0281f065}{x}}()\ -\/\ 1;}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ yi\ =\ yi\ <\ bufferSize.\mbox{\hyperlink{classph_1_1math_1_1_t_vector2_af3065a5fa872cdb3f2291a84824d5d59}{y}}()\ ?\ yi\ :\ bufferSize.\mbox{\hyperlink{classph_1_1math_1_1_t_vector2_af3065a5fa872cdb3f2291a84824d5d59}{y}}()\ -\/\ 1;}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ ComputePixel\ pixel\_i(getPixelBuffer()-\/>fetchPixel(\{xi,\ yi\},\ 0).getAllValues());}
\DoxyCodeLine{00165\ }
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ accuPixel.addLocal(pixel\_i\ *\ weights[i]);}
\DoxyCodeLine{00167\ \ \ \ \ \}}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00169\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classph_1_1pixel__buffer_1_1_t_pixel}{pixel\_buffer::TPixel<float64>}}(accuPixel.toArray(),\ getPixelBuffer()-\/>numPixelElements());}
\DoxyCodeLine{00170\ \}}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \}\textcolor{comment}{//\ end\ namespace\ ph}}

\end{DoxyCode}
