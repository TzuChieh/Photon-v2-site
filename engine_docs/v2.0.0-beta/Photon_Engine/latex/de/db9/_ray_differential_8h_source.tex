\doxysection{Ray\+Differential.\+h}
\hypertarget{_ray_differential_8h_source}{}\label{_ray_differential_8h_source}\index{Source/Core/RayDifferential.h@{Source/Core/RayDifferential.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}Math/TVector3.h"{}}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <limits>}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceph}{ph}}}
\DoxyCodeLine{00008\ \{}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classph_1_1_ray_differential}{RayDifferential}}\ final}
\DoxyCodeLine{00011\ \{}
\DoxyCodeLine{00012\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00013\ \ \ \ \ \mbox{\hyperlink{classph_1_1_ray_differential}{RayDifferential}}();}
\DoxyCodeLine{00014\ \ \ \ \ \mbox{\hyperlink{classph_1_1_ray_differential}{RayDifferential}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\&\ dPdX,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\&\ dPdY,}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\&\ dDdX,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\&\ dDdY);}
\DoxyCodeLine{00016\ }
\DoxyCodeLine{00017\ \ \ \ \ \textcolor{comment}{//\ Propagate\ differential\ quantities\ to\ some\ location\ on\ a\ surface\ the\ ray}}
\DoxyCodeLine{00018\ \ \ \ \ \textcolor{comment}{//\ has\ intersected.\ Specifically,\ calculate\ ray\ differentials\ on\ location}}
\DoxyCodeLine{00019\ \ \ \ \ \textcolor{comment}{//\ <surfaceP>\ with\ surface\ normal\ <surfaceN>.}}
\DoxyCodeLine{00020\ \ \ \ \ \textcolor{keywordtype}{void}\ transferToSurface(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\&\ surfaceP,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\&\ surfaceN);}
\DoxyCodeLine{00021\ }
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{comment}{//\ Modify\ differential\ quantities\ as\ if\ the\ ray\ is\ reversed\ in}}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{comment}{//\ direction.}}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ reverse()}
\DoxyCodeLine{00025\ \ \ \ \ \{}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ m\_dDdX.mulLocal(-\/1);}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ m\_dDdY.mulLocal(-\/1);}
\DoxyCodeLine{00028\ \ \ \ \ \}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ setPartialPs(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\&\ dPdX,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\&\ dPdY)}
\DoxyCodeLine{00031\ \ \ \ \ \{}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ m\_dPdX\ =\ dPdX;}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ m\_dPdY\ =\ dPdY;}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ m\_isPartialPsNonZero\ =\ isVectorNonZero(dPdX)\ ||\ isVectorNonZero(dPdY);}
\DoxyCodeLine{00036\ \ \ \ \ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ setPartialDs(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\&\ dDdX,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\&\ dDdY)}
\DoxyCodeLine{00039\ \ \ \ \ \{}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ m\_dDdX\ =\ dDdX;}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ m\_dDdY\ =\ dDdY;}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ m\_isPartialDsNonZero\ =\ isVectorNonZero(dDdX)\ ||\ isVectorNonZero(dDdY);}
\DoxyCodeLine{00044\ \ \ \ \ \}}
\DoxyCodeLine{00045\ }
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\&\ getdPdX()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ m\_dPdX;\ \}}
\DoxyCodeLine{00047\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\&\ getdPdY()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ m\_dPdY;\ \}}
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\&\ getdDdX()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ m\_dDdX;\ \}}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\&\ getdDdY()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ m\_dDdY;\ \}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ isNonZero()\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ m\_isPartialPsNonZero\ ||\ m\_isPartialDsNonZero;\ \}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{comment}{//\ A\ point\ P\ on\ a\ ray.}}
\DoxyCodeLine{00055\ \ \ \ \ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\ m\_P;}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{comment}{//\ Direction\ D\ of\ a\ ray.}}
\DoxyCodeLine{00058\ \ \ \ \ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\ m\_D;}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{comment}{//\ Partial\ derivatives\ for\ P\ \&\ D\ with\ respect\ to\ raster\ coordinates\ x\ \&\ y.}}
\DoxyCodeLine{00061\ \ \ \ \ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\ m\_dPdX,\ m\_dPdY;}
\DoxyCodeLine{00062\ \ \ \ \ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\ m\_dDdX,\ m\_dDdY;}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keywordtype}{bool}\ m\_isPartialPsNonZero;}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordtype}{bool}\ m\_isPartialDsNonZero;}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{bool}\ isVectorNonZero(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1math_1_1_t_vector3}{math::Vector3R}}\&\ vec)}
\DoxyCodeLine{00068\ \ \ \ \ \{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ vec.lengthSquared()\ >\ std::numeric\_limits<real>::epsilon();}
\DoxyCodeLine{00070\ \ \ \ \ \}}
\DoxyCodeLine{00071\ \};}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \}\textcolor{comment}{//\ end\ namespace\ ph}}

\end{DoxyCode}
