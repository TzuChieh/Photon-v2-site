\doxysection{Graphics\+Memory\+Manager.\+h}
\hypertarget{_graphics_memory_manager_8h_source}{}\label{_graphics_memory_manager_8h_source}\index{Source/RenderCore/GraphicsMemoryManager.h@{Source/RenderCore/GraphicsMemoryManager.h}}
\mbox{\hyperlink{_graphics_memory_manager_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <Common/primitive\_type.h>}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <cstddef>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <limits>}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceph_1_1editor}{ph::editor}}\ \{\ \textcolor{keyword}{class\ }GHIThreadUpdateContext;\ \}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceph_1_1editor_1_1ghi}{ph::editor::ghi}}}
\DoxyCodeLine{00011\ \{}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{keyword}{class\ }GraphicsMemoryBlock;}
\DoxyCodeLine{00014\ \textcolor{keyword}{class\ }GraphicsArena;}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00025\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classph_1_1editor_1_1ghi_1_1_graphics_memory_manager}{GraphicsMemoryManager}}}
\DoxyCodeLine{00026\ \{}
\DoxyCodeLine{00027\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classph_1_1editor_1_1ghi_1_1_graphics_memory_manager_ab8675ecd5a351be1fd8009e68bdf40b9}{\string~GraphicsMemoryManager}}();}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00038\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classph_1_1editor_1_1ghi_1_1_graphics_memory_block}{GraphicsMemoryBlock}}*\ \mbox{\hyperlink{classph_1_1editor_1_1ghi_1_1_graphics_memory_manager_a4ca11b54d0731b2f51e3e756f3dfbb35}{allocHostBlock}}(uint32\ numFramesToLive)\ =\ 0;}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{classph_1_1editor_1_1ghi_1_1_graphics_memory_block}{GraphicsMemoryBlock}}*\ \mbox{\hyperlink{classph_1_1editor_1_1ghi_1_1_graphics_memory_manager_af36211bf5f6e919df70c2c6cd5840473}{allocCustomHostBlock}}(}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ uint32\ numFramesToLive,\ }
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ std::size\_t\ blockSize,}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ std::size\_t\ blockAlignment)\ =\ 0;}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00055\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classph_1_1editor_1_1ghi_1_1_graphics_memory_manager_a0c2c2e95ed7e63a7f525c31caede087e}{onGHILoad}}()\ =\ 0;}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00059\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classph_1_1editor_1_1ghi_1_1_graphics_memory_manager_af7ac520cbf6e721b28a5833ee0bfdedf}{onGHIUnload}}()\ =\ 0;}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00063\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classph_1_1editor_1_1ghi_1_1_graphics_memory_manager_a080cf02656946c7ccae57e8cf588c083}{beginFrameUpdate}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1editor_1_1_g_h_i_thread_update_context}{GHIThreadUpdateContext}}\&\ ctx)\ =\ 0;}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classph_1_1editor_1_1ghi_1_1_graphics_memory_manager_a0da7eed65a34c4b9d2efba841c1f81ee}{endFrameUpdate}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classph_1_1editor_1_1_g_h_i_thread_update_context}{GHIThreadUpdateContext}}\&\ ctx)\ =\ 0;}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{comment}{//\ TODO:\ arena\ should\ guarantee\ always\ succeed\ (custom\ alloc\ if\ cannot\ fit)}}
\DoxyCodeLine{00070\ \ \ \ \ \mbox{\hyperlink{classph_1_1editor_1_1ghi_1_1_graphics_arena}{GraphicsArena}}\ \mbox{\hyperlink{classph_1_1editor_1_1ghi_1_1_graphics_memory_manager_acb8a18a7c29e32af92f7cde9d2107317}{newHostArena}}();}
\DoxyCodeLine{00071\ \ \ \ \ \mbox{\hyperlink{classph_1_1editor_1_1ghi_1_1_graphics_arena}{GraphicsArena}}\ \mbox{\hyperlink{classph_1_1editor_1_1ghi_1_1_graphics_memory_manager_ab7329434ead11b66ecd7dc3db82e1fa3}{newRenderProducerHostArena}}();}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keyword}{static}\ uint32\ \mbox{\hyperlink{classph_1_1editor_1_1ghi_1_1_graphics_memory_manager_a91bb497efda0b2d20e87df9340835eeb}{equivalentRenderFrameLifetime}}(uint32\ numRenderFramesToLive)}
\DoxyCodeLine{00075\ \ \ \ \ \{}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \textcolor{comment}{/*\ GHI\ frame\ may\ end\ before\ render\ frame\ ends\ but\ can\ never\ restart\ until\ next\ render\ frame}}
\DoxyCodeLine{00077\ \textcolor{comment}{\ \ \ \ \ \ \ \ begins,\ so\ we\ need\ to\ increase\ the\ number\ of\ frames\ to\ live\ to\ cover\ for\ the\ case\ that\ GHI}}
\DoxyCodeLine{00078\ \textcolor{comment}{\ \ \ \ \ \ \ \ frame\ may\ end\ earlier\ than\ render\ frame.\ Adding\ 1\ frame\ will\ suffice\ for\ this\ case,\ as\ that}}
\DoxyCodeLine{00079\ \textcolor{comment}{\ \ \ \ \ \ \ \ means\ the\ lifetime\ won't\ end\ until\ next\ render\ frame.}}
\DoxyCodeLine{00080\ \textcolor{comment}{\ \ \ \ \ \ \ \ */}}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ numRenderFramesToLive\ +\ 1;}
\DoxyCodeLine{00082\ \ \ \ \ \}}
\DoxyCodeLine{00083\ \};}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \}\textcolor{comment}{//\ end\ namespace\ ph::editor::ghi}}

\end{DoxyCode}
